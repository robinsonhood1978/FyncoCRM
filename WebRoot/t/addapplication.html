<#include "/t/_c.html" />
<link type="text/css" href="/f/layui/css/layui.css" rel="stylesheet">
<@layout>
                <div class="mdk-drawer-layout__content page">



                    <div class="container-fluid  page__heading-container">
                        <div class="page__heading">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb mb-0">
                                    <li class="breadcrumb-item"><a href="#"><i class="material-icons icon-20pt">home</i></a></li>
                                    <li class="breadcrumb-item">Clients</li>
                                    <li class="breadcrumb-item active" aria-current="page">Applications</li>
                                </ol>
                            </nav>
                            <h1 class="m-0"><#if method=='add'>New<#else>Edit</#if> Application</h1>
                            <div class="text-right mb-7">
                            	<button class="btn btn-success" onClick="return SaveApp('${method}');">Save Application</button>
                        	 	<button onclick="history.go(-1)" class="btn btn-success">Go Back</button>
                        	 </div>
                        </div>
                    </div>




                    <div class="container-fluid page__container">
                    
                        <div class="card card-form">
                        <div class="col-lg-12 card-body " style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">General</strong></p>
                                   
                         </div>
                            <div class="row no-gutters">
                                <!-- <div class="col-lg-4 card-body">
                                    <p><strong class="headings-color">General</strong></p>
                                   
                                </div> -->
                                <div class="col-lg-12 card-form__body card-body">
                                	<div class="row">
                                        <!-- div class="col">
                                            <div class="form-group">
                                                <label for="fname">Application No.</label>
                                                <input type="text" class="form-control" id="application_no" value="${(application.application_no)!}">
                                            </div>
                                        </div-->
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Application Date</label>
                                                <input id="application_date" type="text" class="form-control" value="<#if application??&&application.application_date??>${(application.application_date)?string('dd/MM/yyyy')!}</#if>" placeholder="date: 00/00/0000" data-mask="00/00/0000" autocomplete="off" maxlength="10">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">Adviser Name</label>
                                                <input type="text" class="form-control" id="adviser_name" value="${(application.adviser_name)!}">
                                            </div>
                                        </div>
                                    </div>
                                 	<div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">Adviser Contact Number</label>
                                                <input type="text" class="form-control" id="adviser_contact_number" value="${(application.adviser_contact_number)!}">
                                            </div>
                                        </div>
                                        
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Adviser Email</label>
                                                <input type="text" class="form-control" id="adviser_email" value="${(application.adviser_email)!}">
                                            </div>
                                        </div>
                                    </div>
                                    

                                </div>
                                
                                
                            </div>
                        </div>
                        <div class="card card-form">
                        <div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Loan Information</strong></p>
                                   
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body card-body">
                                	
                                 	<div class="row">
                                 		<div class="col">
                                            <div class="form-group">
                                                <label for="fname">Lender</label>
                                                 <input type="text" class="form-control" id="lender" value="${(application.lender)!}">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Lending Amount Required</label>
                                                <input type="text" class="form-control" id="lending_amount_required" value="${(application.lending_amount_required)!}" >
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">Lending Purpose</label>
                                                <select id="lending_purpose" data-toggle="select" multiple class="form-control">
				                                    <option value="New Purchase">New Purchase</option>
				                                    <option value="Refinance">Refinance</option>
				                                    <option value="Top Up">Top Up</option>
				                                    <option value="Construction">Construction</option>
				                                    <option value="Development">Development</option>
				                                    <option value="Other">Other</option>
				                                </select>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Purpose</label><br/>
                                                <textarea class="comment" id="purpose" rows="4">${(application.purpose)!}</textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                    	<div class="col">
                                            <div class="form-group">
                                                <label for="lname">LVR</label>
                                                <input type="text" class="form-control" id="LVR" value="${(application.LVR)!}">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">UMI</label>
                                                <input type="text" class="form-control" id="UMI" value="${(application.UMI)!}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Settlement Date</label>
                                                <input id="settlement_date" type="date" class="form-control" value="<#if application??&&application.settlement_date??>${(application.settlement_date)?string('dd/MM/yyyy')!}</#if>" placeholder="date: 00/00/0000" maxlength="10">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">Finance Date</label>
                                                <input id="finance_date" type="date" class="form-control" value="<#if application??&&application.finance_date??>${(application.finance_date)?string('dd/MM/yyyy')!}</#if>" placeholder="date: 00/00/0000" maxlength="10">
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="row">
                                    	<div class="col">
                                            <div class="form-group">
                                                <label for="lname">Security Holder</label>
                                                <input type="text" class="form-control" id="security_holder" value="${(application.security_holder)!}">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="lname">Borrower</label>
                                                <input type="text" class="form-control" id="borrower" value="${(application.borrower)!}">
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <!-- <div class="row">
                                    	<div class="col">
                                            <div class="form-group">
                                                <label for="lname">Existing Loan Amount</label>
                                                <input type="text" class="form-control" id="existing_loan_amount" value="${(application.existing_loan_amount)!}">
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="fname">Total Loan Amount</label>
                                                <input type="text" class="form-control" id="total_loan_amount" value="${(application.total_loan_amount)!}">
                                            </div>
                                        </div>
                                        
                                    </div> -->

                                </div>
                                
                                
                            </div>
                        </div>
                        
                        <div class="card card-form">
                        <div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Security</strong></p>
                                    <!-- <p class="text-muted">Edit the client detailed security information.</p> -->
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body card-body">
                                	<div id="security">
	                                	<div id="security_property">
	                                	<div id="security_property_[property_index]">
	                                		<div class="card-header bg-white d-flex align-items-center">
				                               <p><strong class="headings-color">Security Information</strong></p>
				                                <div class="d-flex ml-auto">
				                                    <div style="display:none" onclick="RemoveSecurityProperty('[property_index]')" id="removeProperty">
				                                                <i class="material-icons">remove_circle_outline</i>
				                                           		<label>Remove</label>
				                                           		</div>
				                                </div>
				                            </div>
		                                 	<div class="row">
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <label for="fname">Property Address</label>
		                                                <input type="text" class="form-control" name="security_property">
		                                        	</div>
		                                        </div>
		                                        
		                                    </div>
		                                    <div class="row" style="display: none;"><!-- dannel modify  -->
		                                       <div class="col">
		                                            <div class="form-group">
		                                                <label>Bank</label>
		                                                <input type="text" class="form-control" name="security_bank" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <label>Owner</label>
		                                                <input type="text" class="form-control" name="security_owner" value="">
		                                            </div>
		                                        </div>
		                                    </div>
		                                    <div class="row">
		                                       <div class="col">
		                                            <div class="form-group">
		                                                <label>Property Type</label>
		                                                <input type="text" class="form-control" name="security_property_type" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <label>Use</label>
		                                                <input type="text" class="form-control" name="security_property_use" value="">
		                                            </div>
		                                        </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <label>Value</label>
		                                                <input type="text" class="form-control" name="security_property_value" value="">
		                                            </div>
		                                        </div>
		                                    </div>
	                                    </div>
                                    </div>
                                    </div>
                                   
                                    
                                   
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group" style="text-align: center; border: solid 1px; height: 40px; border-radius:15px;" >
			                                   <div id="addproperty" style="margin: 5px;">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">Add More Property</label>
                                           		</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    
                                    
                                </div>
                            </div>
                        </div>
							<div class="card card-form">
							<div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Applicant</strong></p>
                                   
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body card-body">
                                	
                                 	<div class="row">
                                 		<!-- div class="col">
                                            <div class="form-group">
			                                   <div id="add_new_lead">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">New Lead</label>
                                           		</div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
			                                   <div id="add_new_client">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">New Client</label>
                                           		</div>
                                            </div>
                                        </div-->
                                        <div class="col">
                                            <div class="form-group" style="text-align: center; border: solid 1px; height: 40px; border-radius:15px;">
			                                   <div id="add_new_applicant" style="margin: 5px;">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">New Applicant</label>
                                           		</div>
                                            </div>
                                        </div>
                                        <!-- div class="col">
                                            <div class="form-group" style="text-align: center; border: solid 1px; height: 40px; border-radius:15px;">
			                                   <div id="from_applicant" style="margin: 5px;">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">Applicants</label>
                                           		</div>
                                            </div>
                                        </div -->
                                        <div class="col">
                                            <div class="form-group" style="text-align: center; border: solid 1px; height: 40px; border-radius:15px;">
			                                   <div id="addapplicantfromleads" style="margin: 5px;">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">Leads</label>
                                           		</div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center; border: solid 1px; height: 40px; border-radius:15px;">
			                                   <div id="addapplicantfromclient" style="margin: 5px;">
                                                <i class="material-icons">add_circle_outline</i>
                                           		<label for="fname">Clients</label>
                                           		</div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div id="applicants">
	                                    <div id="applicant" style="display:none;">
	                                    	<div id="div_applicant_[applicant_id]">
		                                    	<div class="stories-cards mb-4">
		
					                            <div class="card stories-card">
					                                <div class="stories-card__content d-flex align-items-center flex-wrap">
					                                    <div class="avatar avatar-sm mr-2">
					                                        <img src="[applicant_avatar]"  alt="Avatar" class="avatar-img rounded-circle">
					                                    </div>
					                                    <div class="stories-card__title flex">
					                                        <h6 class="card-title m-0">[applicant_name]</h6>
					                                        <small class="text-dark-gray"></small>
					                                    </div>
					                                    
					                                    <div class="dropdown ml-auto">
					                                        <a href="#" data-toggle="dropdown" data-caret="false" class="text-muted"><i class="material-icons">more_vert</i></a>
					                                        <div class="dropdown-menu dropdown-menu-right">
					                                            <a href="javascript:void(0)" onclick="ViewApplicant('[applicant_id]');" class="dropdown-item">View</a>
					                                            <a href="javascript:void(0)" onclick="EditApplicant('[applicant_id]');" class="dropdown-item">Edit</a>
					                                            <div class="dropdown-divider"></div>
					                                            <a href="javascript:void(0)" onclick="RemoveDiv('[applicant_id]');" class="dropdown-item">Remove</a>
					                                        </div>
					                                    </div>
					                                </div>
					                            </div> 
					
					                        	</div>
					                        </div>
	                                    </div>
	                                 </div>
	                                    

                                    

                                </div>
                                
                                
                            </div>
                        </div>
                        
                        
                        	
                            
	                            <div class="col-lg">
	                                <div class="z-0">
	                                    <ul id="newapplicants" class="nav nav-tabs nav-tabs-custom" role="tablist">
		                                   
					                        <div style="display:none;" id="newapplicant">
					                        
		                                        <li id="newapplicant_[newapplicant_index]" class="nav-item" >
		                                            <a id="tab-head-[newapplicant_index]" href="#newapplicant_form_[newapplicant_index]" class="nav-link active" data-toggle="tab" role="tab" aria-controls="newapplicant_form_[newapplicant_index]" aria-selected="true">
		                                                <span class="nav-link__count"><label onclick="ActiveTab('[newapplicant_index]')">Applicant [newapplicant_index]</label>
		                                                &nbsp;&nbsp;&nbsp;&nbsp;<i onclick="RemoveTab('[newapplicant_index]')" style="font-size:15px" class="material-icons">close</i></span>
		                                                <input type="hidden" name="newapplicant_id">
		                                            </a>
		                                        </li>
		                                    
	                        
					                        </div>
					                        
	                                        
	                                    </ul>
	                                    
	                                    <div style="display:none;" id="newapplicant_forms_card" class="card">
	                                        <div id="newapplicant_forms" class="card-body tab-content">
	                                        <div style="display:none" id="newapplicant_form">
	                                            <div class="tab-pane active show fade" id="newapplicant_form_[newapplicant_index]">
	                                            <div style="height:640px;max-height:100%" class="embed-responsive embed-responsive-1by1">
	  <iframe style="max-height:100%" class="embed-responsive-item" src="/client/add?type=2&l=s&i=1&tb=[newapplicant_index]"></iframe>
	</div>  
	                                            </div>
	                                        </div>
	                                            
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
	                            
	                            
                            
                        	
                        
                        <div class="card card-form">
                        <div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;"> 
                                    <p><strong class="headings-color">Assets</strong></p>
                                    <p class="text-muted"></p>
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body">
                                   			<div class="row">
                                   			<div style="vertical-align: bottom;width:20%;">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
                                                        
		                                            </div>
			                                     </div>
                                                  <div style="width:10%;" >
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Description</label>
		                                                
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Value</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                            <div class="row">
                                            <div style="width:20%;">
		                                            <div style=" margin-left:40px; margin-top: 15px;" class="form-group">
                                                       <div class="custom-control custom-checkbox">
                                                       
                                                       Cash
                                                       </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%;">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" id="cash_d" name="cash_d" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" onblur="Asset();" id="cash_v" name="cash_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                
                                                <div id="savings">
                                                <div id="saving">
                                                <div id="saving_[saving_index]">
                                                
                                                   <div class="row">
                                               
                                                   <div style="width:20%;">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_saving" class="custom-control custom-checkbox">
   
                                                        Saving
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%;">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               		
                                                            <i id="add_saving" class="material-icons" >add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveSaving('[saving_index]')" id="minus_saving" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="saving_d" placeholder="(which bank)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="saving_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                                                
                                                <div id="investments">
                                                <div id="investment">
                                                <div id="investment_[investment_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_investment" class="custom-control custom-checkbox">
                                                            
                                                        Investment
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                             
		                                               		
                                                            <i id="add_investment" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveInvestment('[investment_index]')" id="minus_investment" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="investment_d" placeholder="(shares, stock, bond etc)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="investment_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                                   <div id="kiwisavers">
                                                <div id="kiwisaver">
                                                <div id="kiwisaver_[kiwisaver_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
			                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
			                                               <div id="txt_kiwisaver" class="custom-control custom-checkbox">
	                                                        KiwiSaver
	                                                        </div>
			                                            </div>
			                                     	</div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               		
                                                            <i id="add_kiwisaver" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveKiwisaver('[kiwisaver_index]')" id="minus_kiwisaver" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="kiwisaver_d" placeholder="(KiwiSaver Provider, owner)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="kiwisaver_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>       
                                   <div id="vehicles">
                                                <div id="vehicle">
                                                <div id="vehicle_[vehicle_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_vehicle" class="custom-control custom-checkbox">
                                                            
                                                        Motor Vehicle
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               		
                                                            <i id="add_vehicle" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveVehicle('[vehicle_index]')" id="minus_vehicle" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="vehicle_d" placeholder="(model)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="vehicle_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>      
                                   <div class="row">
                                   				<div style="width:20%">
		                                            <div style=" margin-left:40px; margin-top: 15px;" class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               Furniture
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" id="furniture_d" name="furniture_d" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" onblur="Asset();" id="furniture_v" name="furniture_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>  
		                           <div class="row">
			                           			<div style="width:20%">
		                                            <div style=" margin-left:40px; margin-top: 15px;" class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               Term Deposit
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" id="term_deposit_d" name="term_deposit_d" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" onblur="Asset();" id="term_deposit_v" name="term_deposit_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div> 
		              <div class="row">
		              						<div style="width:20%">
		                                            <div style=" margin-left:40px; margin-top: 15px;" class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               Other Currency Account
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" id="other_currency_account_d" name="other_currency_account_d" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" onblur="Asset();" id="other_currency_account_v" name="other_currency_account_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>                         
                                   <div class="row">
                                   <div style="width:25%">
		                                            <div style=" margin-left:40px; margin-top: 15px;" class="form-group">
		                                               <div class="custom-control custom-checkbox">
                                                       Deposit on property (If Paid)
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" id="deposit_d" name="deposit_d" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label></label>
		                                                <input type="text" class="form-control" onblur="Asset();" id="deposit_v" name="deposit_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
		                                    
		                       <div id="propertys">
                                                <div id="property">
                                                <div id="property_[property_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_property" class="custom-control custom-checkbox">
                                                            
                                                        Property
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group" >
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_property" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveProperty('[property_index]')" id="minus_property" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="property_d" placeholder="(Address, owner, use, etc.)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="property_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                                                
                               <div id="businessowns">
                                                <div id="businessown">
                                                <div id="businessown_[businessown_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_businessown" class="custom-control custom-checkbox">
                                                            
                                                        Business owned
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_businessown" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveBusinessown('[businessown_index]')" id="minus_businessown" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="businessown_d" placeholder="(Business name, percentage)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="businessown_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                            <div id="otherassets">
                                                <div id="otherasset">
                                                <div id="otherasset_[otherasset_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_otherasset" class="custom-control custom-checkbox">
                                                            
                                                        Other Assets (Specify) 
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_otherasset" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveOtherasset('[otherasset_index]')" id="minus_otherasset" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="otherasset_d" placeholder="(KiwiSaver Provider, owner)" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" onblur="Asset();" name="otherasset_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                           
									<div class="row">
												<div style="vertical-align: bottom;width:20%;">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                                                        
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div style="display:none;" class="form-group">
		                                            <label></label>
		                                               <a href="javascript:void(0)" onclick="Asset();">Calculate Total Value</a>
		                                            </div>
		                                            <div style="width:100%">
		                                            <div  class="form-group">
		                                               
		                                                Total Value
                                                        
		                                            </div>
			                                     </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="total_value"></div>
		                                                <input type="hidden" class="form-control" id="total_v" name="total_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>


                                </div>
                            </div>
                        </div>
                        
                        
                         <div class="card card-form">
                         <div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Liabilities</strong></p>
                                    <p class="text-muted"></p>
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body">
                                   			<div class="row">
                                   				<div style="vertical-align: bottom;width:20%">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
                                                        
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Description</label>
		                                                
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Balance</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
<div id="loandrops">
                                                <div id="loandrop">
                                                <div id="loandrop_[loandrop_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="margin-left: 40px;">
                                                        <div id="txt_loandrop" style="display:inline-block;" ><label for="lname">Loan</label></div>
		                                                <div style="width:70%;display:inline-block;" >
		                                                <select id="sel_loandrop" name="loandrop_sel" style="display:inline-block;"  class="form-control">
						                                    <option value="Home Loan">Home Loan</option>
						                                    <option value="Commercial Loan">Commercial Loan</option>
						                                    <option value="Business Loan">Business Loan</option>
						                                    <option value="Personal Loan">Personal Loan</option>
						                                    <option value="Student Loan">Student Loan</option>
						                                    <option value="Car Loan">Car Loan</option>
						                                    <option value="Second tier Lending">Second tier Lending</option>
						                                    <option value="Other">Other</option>
						                                </select>
						                                </div>
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_loandrop" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveLoandrop('[loandrop_index]')" id="minus_loandrop" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="loandrop_d" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" onblur="Liability();" class="form-control" name="loandrop_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                             
  <div id="otherliabilitys">
                                                <div id="otherliability">
                                                <div id="otherliability_[otherliability_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_otherliability" class="custom-control custom-checkbox" >
                                                            
                                                        Other Liabilities
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               		
                                                            <i id="add_otherliability" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveOtherliability('[otherliability_index]')" id="minus_otherliability" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="otherliability_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input onblur="Liability();" type="text" class="form-control" name="otherliability_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                                                  
                                                <div class="row">
                                                <div style="vertical-align: bottom;width:20%; text-align: ">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
                                                        
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Provider</label>
		                                                
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Limit</label>
		                                                
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Balance</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                
                                                <div id="revcredits">
                                                <div id="revcredit">
                                                <div id="revcredit_[revcredit_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;" >
		                                               <div id="txt_revcredit" class="custom-control custom-checkbox">
                                                            
                                                        Revolving Credit
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_revcredit" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveRevcredit('[revcredit_index]')" id="minus_revcredit" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="revcredit_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="revcredit_l" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" onblur="Liability();" class="form-control" name="revcredit_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                                                
                                                <div id="overlimits">
                                                <div id="overlimit">
                                                <div id="overlimit_[overlimit_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px; margin-top: 7px;">
		                                               <div id="txt_overlimit" class="custom-control custom-checkbox">
                                                           
                                                        Overdraft Limit
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group" >
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;" >
		                                               		
                                                            <i id="add_overlimit" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveOverlimit('[overlimit_index]')" id="minus_overlimit" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="overlimit_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="overlimit_l" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input onblur="Liability();" type="text" class="form-control" name="overlimit_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>
                                                
                                                
<div id="creditcards">
                                                <div id="creditcard">
                                                <div id="creditcard_[creditcard_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left:40px;margin-top: 7px;">
		                                               <div id="txt_creditcard" class="custom-control custom-checkbox">
                                                            
                                                        Credit Card
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_creditcard" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveCreditcard('[creditcard_index]')" id="minus_creditcard" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="creditcard_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="creditcard_l" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input onblur="Liability();" type="text" class="form-control" name="creditcard_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>        
                                                
<div id="storecards">
                                                <div id="storecard">
                                                <div id="storecard_[storecard_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left: 40px;margin-top: 7px;">
		                                               <div id="txt_storecard" class="custom-control custom-checkbox">
                                                            
                                                        Store Card
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_storecard" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveStorecard('[storecard_index]')" id="minus_storecard" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="storecard_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="storecard_l" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input onblur="Liability();" type="text" class="form-control" name="storecard_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>  
                                                <div class="row">
                                                <div style="vertical-align: bottom;width:20%">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
                                                        
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Provider</label>
		                                                
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Monthly Cost</label>
		                                                
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Balance</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>          
<div id="hirepurchases">
                                                <div id="hirepurchase">
                                                <div id="hirepurchase_[hirepurchase_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:20%">
		                                            <div class="form-group" style="margin-left: 40px;margin-top: 7px;">
		                                               <div id="txt_hirepurchase" class="custom-control custom-checkbox">
                                                            
                                                        Hire Purchase
                                                        </div>
		                                            </div>
			                                     </div>
                                                   <div style="width:10%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox" style="text-align: center;margin-top: 7px;">
		                                               
		                                               		
                                                            <i id="add_hirepurchase" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveHirepurchase('[hirepurchase_index]')" id="minus_hirepurchase" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="hirepurchase_d" placeholder="" value="">
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="hirepurchase_c" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input onblur="Liability();" type="text" class="form-control" name="hirepurchase_v" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>       

                                                
                                                <div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     <div style="vertical-align: bottom;width:25%">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                                                        
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            
			                                     </div>
		                                       <div class="col">
		                                            <div style="display:none;" class="form-group">
		                                            <label></label>
		                                               <a href="javascript:void(0)" onclick="Liability();">Calculate Total Value</a>
		                                            </div>
		                                            <div style="text-align: right;">
		                                            Total Liabilities Value
		                                            </div>
		                                            
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="total_lvalue"></div>
		                                                <input type="hidden" class="form-control" id="total_lv" name="total_lv" value="">
		                                                <input type="hidden" class="form-control" id="equity" name="equity" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>      
		                                    <div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     <div style="vertical-align: bottom;width:25%">
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
                                                        
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		                                            
			                                     </div>
		                                       <div class="col">
		                                            <div class="form-group" style="text-align: right;">
		                                            Equity
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="equity_value"></div>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>                        
                                   
                                   
		                                    
		                      
                                                
                              
                                                      
									


                                </div>
                            </div>
                        </div>
                        
<div id="income" class="card card-form" style="display:none;">

 <div id="applicantmi_txt" class="col-lg-12 card-body" style="display:none; font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
  <p><strong class="headings-color">Income</strong></p>
<!-- <h5>Monthly Income from work</h5> -->   
 </div>  
 <div class="card card-form" style="margin-left: 10px; margin-right: 10px; margin-top: 5px; ">
 <div class="row no-gutters">
 <div class="row no-gutters">
	<div class="card-header card-header-sm" style="background-color: #C0C0C0; font-size: 20;" ><h6 class="card-header__title">Monthly Income from work</h6></div>   
</div>

<div id="midivs" style="width:100%">
<div id="midiv" style="display:none;" >
	<div id="applicant_mi_card_[applicant_id]" class="card card-form" style="margin-left: 7px; margin-right: 7px; margin-top: 7px;">
                            <div class="row no-gutters">
                                <div class="card-header card-header-sm bg-white">
                                        <h6 id="applicant_name" class="card-header__title">[applicant_name]</h6>
                                        <input type="hidden" name="applicantname_[applicant_id]" value="[applicant_name]">
                                    </div>
                                <div class="col-lg-12 card-form__body">
                                   			<div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
			                                      <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Income</label>
		                                                
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Description</label>
		                                                
		                                            </div>
			                                     </div>
		                                       <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Gross</label>
		                                                
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Net</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
<div id="monthincomes_[applicant_id]">
                                                <div id="monthincome_[applicant_id]">
                                                <div id="monthincome_[applicant_id]_[monthincome_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               <label></label><br/>
		                                               		
                                                            <i id="add_monthincome_[applicant_id]" onclick="AddMonthincome('[applicant_id]')" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveMonthincome('[monthincome_index]','[applicant_id]')" id="minus_monthincome_[applicant_id]" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                               
                                                      
                                                
                                                <select name="monthincome_income_[applicant_id]" style="display:inline-block;"  class="form-control">
				                                    <option value="Salary/wages">Salary/wages</option>
				                                    <option value="Overtime">Overtime</option>
				                                    <option value="Second Job">Second Job</option>
				                                    <option value="Business Profit">Business Profit</option>
				                                    <option value="Shareholder Salary">Shareholder Salary</option>
				                                    <option value="Bonus">Bonus</option>
				                                    <option value="Welfare Benefit">Welfare Benefit</option>
				                                    <option value="Dividend">Dividend</option>
				                                    <option value="Other">Other</option>
				                                </select>
				                               
                                                  
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="monthincome_description_[applicant_id]" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                       <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="monthincome_gross_[applicant_id]" placeholder="" value="">
		                                            </div>
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" name="monthincome_net_[applicant_id]" onblur="Income();" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                             
                                                
                                                
                                                
                                                
                                                
                                                                                                
                                   
		                                    
		                      
                                                
                              
                                                      
									


                                </div>
                            </div>
                        </div>
	
</div>
</div>

</div> 
</div>
            
<div id="applicantmifr_txt" style="display:none;">
<!-- <p>Monthly Income from Rental</p>    -->
 </div>                          
                                   
<div id="mifrdivs">
<div id="mifrdiv" style="display:none;" >
	<div id="applicant_mifr_card_[applicant_id]" class="card card-form" style="margin-left: 10px; margin-right: 10px;">
                            <div class="row no-gutters">
                                <div class="card-header card-header-sm " style="background-color: #C0C0C0; font-size: 20;">
                                        <h6 id="applicant_name" class="card-header__title">Monthly Income from Rental</h6>
                                    </div>
                                <div class="col-lg-12 card-form__body">
                                   			<div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
			                                      <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Income</label>
		                                                
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Description</label>
		                                                
		                                            </div>
			                                     </div>
		                                       
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Net</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
<div id="monthincomesfr">
                                                <div id="monthincomefr">
                                                <div id="monthincomefr_[monthincomefr_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               <label></label><br/>
		                                               		
                                                            <i id="add_monthincomefr" onclick="AddMonthincomefr()" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveMonthincomefr('[monthincomefr_index]')" id="minus_monthincomefr" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                               
                                                      
                                                
                                                <select name="monthincomefr_income" style="display:inline-block;"  class="form-control">
				                                    <option value="Rental Income">Rental Income</option>
				                                    <option value="Boarder Income">Boarder Income</option>
				                                    <option value="Other">Other</option>
				                                </select>
				                               
                                                  
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="monthincomefr_description" placeholder="Property address, owner, existing/proposed, property use etc." value="">
		                                            </div>
			                                     </div>
		             
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" class="form-control" name="monthincomefr_net" onblur="Income();" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                             
                                                
                                                
                                                
                                                
                                                
                                                                                                
                                   
		                                    
		                      
                                                
                              
                                                      
									


                                </div>
                            </div>
                        </div>
	
</div>
</div> 

										<div class="row">
                                               <div class="col">
		                                            
		                                        </div>
		                                        <div class="col">
		                                            
		                                        </div>
			                                     
		                                       <div class="col"style="text-align: right;">
		                                            
		                                         
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;Total Monthly Income 
                                                        
		                                            </div>
		                                               
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="total_income_value"></div>
		                                                <input type="hidden" class="form-control" id="total_income_value_h" name="total_income_value_h" value="">
		                                            </div>
		                                        </div>
		                                       
		                                    </div>

</div>
<div id="expense" class="card card-form" style="display:none;">
<div id="applicantmiex_txt" style="display:none;">
<!-- <p>Monthly Expenditure</p>    -->
 </div>                          
                                   
<div id="miexdivs">
<div id="miexdiv" style="display:none;" >
	<div id="applicant_miex_card" class="card card-form">
	<div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Expense</strong></p>
                                   
                                </div>
                            <div class="row no-gutters">
                                <!-- <div class="card-header card-header-sm" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                        <h6 id="applicant_name" >Monthly Expenditure</h6>
                                    </div> -->
                                <div class="col-lg-12 card-form__body">
                                   			<div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                            <div class="custom-control custom-checkbox">
		                     
		                                            </div>
		                                              
		                                            </div>
			                                     </div>
			                                     
			                                      <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Expenditure</label>
		                                                
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Description</label>
		                                                
		                                            </div>
			                                     </div>
		                                       
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <br/>
		                                            <label>Monthly Expenses</label>
		                                                
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
<div id="monthexpend">
                                                <div id="monthexpend">
                                                <div id="monthexpend_[monthexpend_index]">
                                                
                                                   <div class="row">
                                                   <div style="width:5%">
		                                            <div class="form-group">
		                                               <div class="custom-control custom-checkbox">
		                                               <label></label><br/>
		                                               		
                                                            <i id="add_monthexpend" onclick="AddMonthexpend()" class="material-icons">add_circle_outline</i>
                                                          
                                                            <i style="display:none" onclick="RemoveMonthexpend('[monthexpend_index]')" id="minus_monthexpend" class="material-icons">remove_circle_outline</i>
                                                        
                                                        </div>
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
                                                <select name="monthexpend_expend" style="display:inline-block;"  class="form-control">
				                                    <option value="New Mortgage Proposed">New Mortgage Proposed</option>
				                                    <option value="Existing Mortgage">Existing Mortgage</option>
				                                    <option value="Credit Card">Credit Card</option>
				                                    <option value="Overdraft">Overdraft</option>
				                                    <option value="Personal Loan">Personal Loan</option>
				                                    <option value="Business Loan">Business Loan</option>
				                                    <option value="Student Loan">Student Loan</option>
				                                    <option value="Other Loan">Other Loan</option>
				                                    <option value="Hire Purchase">Hire Purchase</option>
				                                    <option value="Rent">Rent</option>
				                                    <option value="Board">Board</option>
				                                    <option value="Childcare">Childcare</option>
				                                    <option value="Education">Education</option>
				                                    <option value="Child Support">Child Support</option>
				                                    <option value="Motor Vehicle">Motor Vehicle</option>
				                                    <option value="Insurance">Insurance</option>
				                                    <option value="Superannuation">Superannuation</option>
				                                    <option value="Rates">Rates</option>
				                                    <option value="Utilities">Utilities</option>
				                                    <option value="Food">Food</option>
				                                    <option value="Other">Other</option>
				                                </select>
		                                            </div>
			                                     </div>
			                                     <div class="col">
		                                            <div class="form-group">
		             
		                                                <input type="text" class="form-control" name="monthexpend_description" placeholder="Property address, owner, existing/proposed, property use etc." value="">
		                                            </div>
			                                     </div>
		             
		                                        <div class="col">
		                                            <div class="form-group">
		                                                <input type="text" onblur="MonthExpend();" class="form-control" name="monthexpend_expense" value="">
		                                            </div>
		                                        </div>
		                                        <div style="width:4%;">
		                                            <div class="form-group">
		                                            <label>&nbsp;</label>
		                                            </div>
		                                        </div>
		                                    </div>
                                                   
                                                
                                                </div>
                                                </div>
                                                </div>                             
                                                
                                                
                                                
                                                
                                                
                                                                                                
                                   
		                                    
		                      
                                                
                              
                                                      
									


                                </div>
                            </div>
                        </div>
	
</div>
</div>                                       
<div class="row">
                                              	<div class="col"></div>
		                                     	<div class="col"></div>
			                                     
		                                       <div class="col" style="text-align: right;">
		                                            
		                                         
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;Total Monthly Expenses
                                                        
		                                            </div>
		                                               
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="total_expense_value"></div>
		                                                <input type="hidden" class="form-control" id="total_expense_value_h" name="total_expense_value_h" value="">
		                                            </div>
		                                        </div>
		                                       
		                                    </div>    
<div class="row">
                                                   
			                                   <div class="col"></div>
		                                     	<div class="col"></div>
		                                       <div class="col" style="text-align: right;">
		                                            
		                                         
		                                            <div style="vertical-align: bottom;" class="form-group">
		                                               
		                                               <label>&nbsp;</label>
                                                       &nbsp;&nbsp;&nbsp;&nbsp;Surplus
                                                        
		                                            </div>
		                                               
			                                     </div>
		                                        <div class="col">
		                                            <div class="form-group">
		                                            
		                                            <div id="surplus_value"></div>
		                                                <input type="hidden" class="form-control" id="surplus_value_h" name="surplus_value_h" value="">
		                                            </div>
		                                        </div>
		                                       
		                                    </div>   
</div>		                                                        
<div class="card card-form">
<div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Notes</strong></p>
                                   
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body card-body">
                                	<div id="notes">
                                		<div id="note">
                                		<div id="note_[note_index]">
                                			<div class="row">
		                                        <div class="col">
		                                            <div class="form-group">
		                                            <label id="txt_note">Note</label>
		                                                <i id="add_note" class="material-icons">add_circle_outline</i>
		                                                &nbsp;&nbsp;<i style="display:none" onclick="RemoveNote('[note_index]')" id="minus_note" class="material-icons">remove_circle_outline</i>
		                                                <br/>
		                                                <textarea class="comment" name="note" rows="3" cols="60"></textarea>
		                                            </div>
		                                        </div>
		                                    </div>
                                		</div>
                                		</div>
                                	</div>
                                    

                                </div>
                                
                                
                            </div>
                        </div>                        
                        
                        <div class="card card-form">
                        <div class="col-lg-12 card-body" style="font-size: 30; background-color: #C0C0C0; padding-bottom: 10px;">
                                    <p><strong class="headings-color">Documents Checklist</strong></p>
                                   
                                </div>
                            <div class="row no-gutters">
                                
                                <div class="col-lg-12 card-form__body card-body">
                                	<div id="LAY_preview">
                                 	<div class="row">
                                 	
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="application_form" id="doc1">
      											<div class="layui-upload-drag" id="up1">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc1_name" for="fname">Application Form</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="approval_letter" id="doc2">
                                                <div class="layui-upload-drag" id="up2">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc2_name" for="fname">Approval Letter</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="appraisal" id="doc3">
                                               <div class="layui-upload-drag" id="up3">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc3_name" for="fname">Appraisal</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="gifting_letter" id="doc4">
                                                <div class="layui-upload-drag" id="up4">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc4_name" for="fname">Gifting Letter</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="proof_of_identity" id="doc5">
      											<div class="layui-upload-drag" id="up5">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc5_name" for="fname">Proof of Identity</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="rate_lock_form" id="doc6">
                                                <div class="layui-upload-drag" id="up6">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc6_name" for="fname">Rate Lock Form</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="sales_purchase_agreement" id="doc7">
                                               <div class="layui-upload-drag" id="up7">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc7_name" for="fname">Sales Purchase Agreement</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="ird_summary" id="doc8">
                                                <div class="layui-upload-drag" id="up8">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc8_name" for="fname">IRD Summary</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                 	
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="payslip" id="doc9">
      											<div class="layui-upload-drag" id="up9">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc9_name" for="fname">Payslip</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="boarder_agreement" id="doc10">
                                                <div class="layui-upload-drag" id="up10">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc10_name" for="fname">Boarder Agreement</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="valuation_report" id="doc11">
                                               <div class="layui-upload-drag" id="up11">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc11_name" for="fname">Valuation Report</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="loan_statement" id="doc12">
                                                <div class="layui-upload-drag" id="up12">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc12_name" for="fname">Loan Statement</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="financial_report" id="doc13">
      											<div class="layui-upload-drag" id="up13">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc13_name" for="fname">Financial Report</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="lease_agreement" id="doc14">
                                                <div class="layui-upload-drag" id="up14">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc14_name" for="fname">Lease Agreement</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="building_report" id="doc15">
                                               <div class="layui-upload-drag" id="up15">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc15_name" for="fname">Building Report</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="loan_agreement" id="doc16">
                                                <div class="layui-upload-drag" id="up16">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc16_name" for="fname">Loan agreement</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="bank_statement" id="doc17">
      											<div class="layui-upload-drag" id="up17">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc17_name" for="fname">Bank Statement</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="rental_agreement" id="doc18">
                                                <div class="layui-upload-drag" id="up18">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc18_name" for="fname">Rental Agreement</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="support_letter" id="doc19">
                                               <div class="layui-upload-drag" id="up19">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc19_name" for="fname">Support Letter</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group" style="text-align: center;">
                                                
                                                <input type="hidden" name="additional_files" id="doc20">
                                                <div class="layui-upload-drag" id="up20">
												  <i class="layui-icon">&#xe67c;</i>
												</div><br>
												<label id="doc20_name" for="fname">Additional Files</label>
                                            </div>
                                        </div>
                                    </div>
                                    
                              
                                    
                                   

                                </div>
                                
                              </div>  
                            </div>
                        </div>
                        
                        <!-- Applicant start-->
                        
                   
                        
                        <!-- Applicant end -->
                        <div class="text-right mb-5">
                        	<input type="hidden" id="appid" value="${(application.id)!}">
                        	<input type="hidden" id="total_income" value="0">
                        	<input id="app_ids" value="${clients!}" hidden="hidden">
                        	<input id="minus_ids" value="${clients!}" hidden="hidden">
                            <button class="btn btn-success" onClick="return SaveApp('${method}');">Save Application</button>
                            <button onclick="history.go(-1)" class="btn btn-success">Go Back</button>
                        </div>
                    </div>


                </div>
                <!-- // END drawer-layout__content -->
                <script>
                $(function() {
                    $('#lending_amount_required').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#UMI').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#existing_loan_amount').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#total_loan_amount').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $("[name='security_property_value']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#cash_v').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $("[name='saving_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='investment_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='kiwisaver_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='vehicle_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#furniture_v').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#term_deposit_v').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#other_currency_account_v').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $('#deposit_v').maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                    $("[name='property_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='businessown_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='otherasset_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='loandrop_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='otherliability_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='revcredit_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='revcredit_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='overlimit_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='overlimit_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='creditcard_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='creditcard_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='storecard_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='storecard_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='hirepurchase_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='hirepurchase_c']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                })
                Date.prototype.format = function(fmt) { 
                    var o = { 
                       "M+" : this.getMonth()+1,                 //月份 
                       "d+" : this.getDate(),                    //日 
                       "h+" : this.getHours(),                   //小时 
                       "m+" : this.getMinutes(),                 //分 
                       "s+" : this.getSeconds(),                 //秒 
                       "q+" : Math.floor((this.getMonth()+3)/3), //季度 
                       "S"  : this.getMilliseconds()             //毫秒 
                   }; 
                   if(/(y+)/.test(fmt)) {
                           fmt=fmt.replace(RegExp.$1, (this.getFullYear()+"").substr(4 - RegExp.$1.length)); 
                   }
                    for(var k in o) {
                       if(new RegExp("("+ k +")").test(fmt)){
                            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));
                        }
                    }
                   return fmt; 
               } 
                function RemoveTab(id){
                	$('#newapplicant_'+id).remove();
                	$('#newapplicant_form_'+id).remove();
                	var applicant_index = document.getElementsByName("newapplicant_id").length;
                	if(applicant_index==1){
                		$('#newapplicant_forms_card').css("display","none");
                	}
                	else{
                		ActiveTab('1');
                	}
                }
                function NewApplicantSucc(id,tb){
                	//alert(id);
                	var a = $("#app_ids").val();
					var b = new Array();
					b.push(id);
		 			if(a==''){
		 				//alert("b:"+String(b));
		 				var s = String(b);
		 				$("#minus_ids").val(b);
		 				$("#app_ids").val(s);
		 			}
		 			else{
		 				var union = a.split(",");
		 				var unionset = new Set(union);
		 				var addset = new Set(b);

		 				for (var x of addset) {
		 					if(unionset.has(x)){
		 						addset.delete(x);
		 					}
		 					else{
		 						unionset.add(x);
		 					}
		 				}

						let minus = Array.from(addset);
						union = Array.from(unionset);
			 				
		 				$("#minus_ids").val(minus);
		 				$("#app_ids").val(String(union));
		 				
		 			}
		 			ShowApplicant();
		 			RemoveTab(tb);
                }
                function ActiveTab(id){
                	$('a').attr("class","nav-link");
                	$('.tab-pane').css("display","none");
                	$('#newapplicant_form_'+id).css("display","block");
                	$('#newapplicant_form_'+id).attr("class","tab-pane active show fade");
                }
                function AddNewApplicant(){
                	var applicant_index = document.getElementsByName("newapplicant_id").length;
                	$('#newapplicant_forms_card').css("display","block");
                	
            		var sourceNode = document.getElementById("newapplicant"); // 获得被克隆的节点对象 
            		var clonedNode = sourceNode.cloneNode(true); // 克隆节点 
            		$node = $(clonedNode);
					if(applicant_index>1){
						$node.find('a').attr("class","nav-link");
            		}
            		var html = $node.html().replaceAll('[newapplicant_index]',applicant_index);  
            		var newnode = parseDom(html);
            		sourceNode.parentNode.appendChild($(newnode)[0]); // 在父节点插入克隆的节点 
            		
            		var sourceNode2 = document.getElementById("newapplicant_form"); // 获得被克隆的节点对象 
            		var clonedNode2 = sourceNode2.cloneNode(true); // 克隆节点 
            		$node2 = $(clonedNode2);
					
            		var html2 = $node2.html().replaceAll('[newapplicant_index]',applicant_index);  
            		var newnode2 = parseDom(html2);
            		var newformnode = $(newnode2)[0];
            		if(applicant_index>1){
            			$(newformnode).find('div[id="newapplicant_form_'+applicant_index+'"]').css("display","none");
            		}
            		sourceNode2.parentNode.appendChild(newformnode); // 在父节点插入克隆的节点 
   
            	}
                
                function MonthIncome(){
                	var monthincome = [];
                	var clientids = $("#app_ids").val();
                	var idArray = clientids.split(",");
                	var total_income = 0;
                	
                	for(var j=0;j<idArray.length;j++){
                		var appid = idArray[j];
                		var applicantOb = {};
                		//monthincome
        				var monthincomeArray = new Array();
        				var monthincome_income = document.getElementsByName("monthincome_income_"+appid);
        				var monthincome_description = document.getElementsByName("monthincome_description_"+appid);
        				var monthincome_gross = document.getElementsByName("monthincome_gross_"+appid);
        				var monthincome_net = document.getElementsByName("monthincome_net_"+appid);
        				for(var i=0;i<monthincome_income.length;i++){
        					if(monthincome_income[i].value!=''){
        						monthincomeArray.push({"monthincome_income":monthincome_income[i].value,
        							"monthincome_description":monthincome_description[i].value,
        							"monthincome_gross":monthincome_gross[i].value.replace(/\$|,/g, ''),
        							"monthincome_net":monthincome_net[i].value.replace(/\$|,/g, '')});
        						if(monthincome_net[i].value!=''){
        							total_income += b20(monthincome_net[i].value);
        						}
        					}
        				} 
        				applicantOb.applicantid=appid;
        				var applicantName= document.getElementsByName("applicantname_"+appid)[0].value;
        				applicantOb.applicant_name = applicantName;
        				applicantOb.monthincome = monthincomeArray; 
        				monthincome.push(applicantOb);
                	}
					$('#total_income').val(total_income);
    				var jsonMonthincome = JSON.stringify( monthincome );
    				return jsonMonthincome;
                }
                function MonthIncomefr(){
                	var total_income = $('#total_income').val()*1;
       				var monthincomefrArray = [];
       				var monthincome_income = document.getElementsByName("monthincomefr_income");
       				var monthincome_description = document.getElementsByName("monthincomefr_description");
       				var monthincome_net = document.getElementsByName("monthincomefr_net");
       				for(var i=0;i<monthincome_income.length;i++){
       					if(monthincome_income[i].value!=''){
       						monthincomefrArray.push({"monthincomefr_income":monthincome_income[i].value,
       							"monthincomefr_description":monthincome_description[i].value,
       							"monthincomefr_net":monthincome_net[i].value.replace(/\$|,/g, '')});
       						if(monthincome_net[i].value!=''){
    							total_income += b20(monthincome_net[i].value);
    						}
       					}
       				} 
       				$('#total_income').val(total_income);
    				var jsonMonthincomefr = JSON.stringify( monthincomefrArray );
    				return jsonMonthincomefr;
                }	
                function MonthExpend(){
                	var total_expense = 0;
       				var monthexpendArray = [];
       				var monthincome_expend = document.getElementsByName("monthexpend_expend");
       				var monthincome_description = document.getElementsByName("monthexpend_description");
       				var monthincome_expense = document.getElementsByName("monthexpend_expense");
       				for(var i=0;i<monthincome_expend.length;i++){
       					if(monthincome_expend[i].value!=''){
       						monthexpendArray.push({"monthexpend_expend":monthincome_expend[i].value,
       							"monthexpend_description":monthincome_description[i].value,
       							"monthexpend_expense":monthincome_expense[i].value.replace(/\$|,/g, '')});
       						if(monthincome_expense[i].value!=''){
       							total_expense += b20(monthincome_expense[i].value);
    						}
       					}
       				} 
       				$('#total_expense').val(total_expense);
       				$('#total_expense_value').html(formatter.format(total_expense));
       	        	$('#total_expense_value_h').val(total_expense);
       	        	
       	        	var total_income = $('#total_income').val();
       	        	if(total_income!=''){
       	        		var surplus = total_income*1-total_expense;
       	        		$('#surplus_value').html(formatter.format(surplus));
           	        	$('#surplus_value_h').val(surplus);
       	        	}
       	        	
    				var jsonMonthexpend = JSON.stringify( monthexpendArray );
    				return jsonMonthexpend;
                }	
                function RemoveMonthincome(id,applicantid){
                	$('#monthincome_'+applicantid+'_'+id).remove();
                }
                function RemoveMonthincomefr(id){
                	$('#monthincomefr_'+id).remove();
                }
                function RemoveMonthexpend(id){
                	$('#monthexpend_'+id).remove();
                }
                function AddMonthincome(id){
                	copyApplicantInfo("monthincome",id);
                	$("[name='monthincome_gross_"+id+"']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
				    $("[name='monthincome_net_"+id+"']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                }
                function AddMonthincomefr(){
                	copyApplicantInfo2("monthincomefr");
                	$("[name='monthincomefr_net']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                }
                function AddMonthexpend(id){
                	copyApplicantInfo2("monthexpend");
                	$("[name='monthexpend_expense']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
                }
	function copyApplicantInfo(nodeid,applicantid){
		
            		var sourceNode = document.getElementById(nodeid+"_"+applicantid); // 获得被克隆的节点对象 
            		
            		var clonedNode = sourceNode.cloneNode(true); // 克隆节点 
            		//alert(applicantid)
            		$node = $(clonedNode);
            		
            		var monthincome_index = document.getElementsByName("monthincome_income_"+applicantid).length;
            		var monthincomefr_index = document.getElementsByName("monthincomefr_income_"+applicantid).length;
            		var monthexpend_index = document.getElementsByName("monthexpend_expend_"+applicantid).length;
            		
            		
            		$node.find('i[id="add_monthincome_'+applicantid+'"]').css("display","none");
            		$node.find('i[id="minus_monthincome_'+applicantid+'"]').css("display","block");
            		
            		$node.find('i[id="add_monthincomefr_'+applicantid+'"]').css("display","none");
            		$node.find('i[id="minus_monthincomefr_'+applicantid+'"]').css("display","block");
            		
            		$node.find('i[id="add_monthexpend_'+applicantid+'"]').css("display","none");
            		$node.find('i[id="minus_monthexpend_'+applicantid+'"]').css("display","block");

            		
            		var html = $node.html().replaceAll('[monthincome_index]',monthincome_index);  
            		html = html.replaceAll('[monthincomefr_index]',monthincomefr_index);  
            		html = html.replaceAll('[monthexpend_index]',monthexpend_index);  
            		
            		var newnode = parseDom(html);
            		sourceNode.parentNode.appendChild($(newnode)[0]); // 在父节点插入克隆的节点  
            	}
	function copyApplicantInfo2(nodeid){
		
		var sourceNode = document.getElementById(nodeid); // 获得被克隆的节点对象 
		
		var clonedNode = sourceNode.cloneNode(true); // 克隆节点 

		$node = $(clonedNode);
		
		var monthincomefr_index = document.getElementsByName("monthincomefr_income").length;
		var monthexpend_index = document.getElementsByName("monthexpend_expend").length;
		
		
		
		$node.find('i[id="add_monthincomefr"]').css("display","none");
		$node.find('i[id="minus_monthincomefr"]').css("display","block");
		
		$node.find('i[id="add_monthexpend"]').css("display","none");
		$node.find('i[id="minus_monthexpend"]').css("display","block");

		var html = $node.html();
		html = html.replaceAll('[monthincomefr_index]',monthincomefr_index);  
		html = html.replaceAll('[monthexpend_index]',monthexpend_index);  
		
		var newnode = parseDom(html);
		sourceNode.parentNode.appendChild($(newnode)[0]); // 在父节点插入克隆的节点  
	}
                function RemoveProperty(id){
                	$('#property_'+id).remove();
                }
                function RemoveVehicle(id){
                	$('#vehicle_'+id).remove();
                }
                function RemoveKiwisaver(id){
                	$('#kiwisaver_'+id).remove();
                }
                function RemoveOtherasset(id){
                	$('#otherasset_'+id).remove();
                }
                function RemoveBusinessown(id){
                	$('#businessown_'+id).remove();
                }
                function RemoveInvestment(id){
                	$('#investment_'+id).remove();
                }
                function RemoveRevcredit(id){
                	$('#revcredit_'+id).remove();
                }
                function RemoveOverlimit(id){
                	$('#overlimit_'+id).remove();
                }
                function RemoveCreditcard(id){
                	$('#creditcard_'+id).remove();
                }
                function RemoveStorecard(id){
                	$('#storecard_'+id).remove();
                }
                function RemoveHirepurchase(id){
                	$('#hirepurchase_'+id).remove();
                }
                function RemoveOtherliability(id){
                	$('#otherliability_'+id).remove();
                }
                function RemoveLoandrop(id){
                	$('#loandrop_'+id).remove();
                }
                
                function RemoveSaving(id){
                	$('#saving_'+id).remove();
                }
                function RemoveSecurityProperty(id){
                	$('#security_property_'+id).remove();
                }
                function RemoveNote(id){
                	$('#note_'+id).remove();
                }
                String.prototype.replaceAll = function(search, replacement) {
            	    var target = this;
            	    return target.split(search).join(replacement);
            	};
            	function parseDom(arg) {

                	var objE = document.createElement("div");

                	objE.innerHTML = "<div>"+arg+"</div>";

                	return objE.childNodes;

                }
            	function copyTr(nodeid){
            		
            		var sourceNode = document.getElementById(nodeid); // 获得被克隆的节点对象 
            		var clonedNode = sourceNode.cloneNode(true); // 克隆节点 
            		$node = $(clonedNode);
            		var saving_index = document.getElementsByName("saving_d").length;
            		var investment_index = document.getElementsByName("investment_d").length;
            		var revcredit_index = document.getElementsByName("revcredit_d").length;
            		var overlimit_index = document.getElementsByName("overlimit_d").length;
            		var creditcard_index = document.getElementsByName("creditcard_d").length;
            		var storecard_index = document.getElementsByName("storecard_d").length;
            		var hirepurchase_index = document.getElementsByName("hirepurchase_d").length;
            		var otherliability_index = document.getElementsByName("otherliability_d").length;
            		var loandrop_index = document.getElementsByName("loandrop_d").length;
            		var monthincome_index = document.getElementsByName("monthincome_income").length;
            		var kiwisaver_index = document.getElementsByName("kiwisaver_d").length;
            		var otherasset_index = document.getElementsByName("otherasset_d").length;
            		var businessown_index = document.getElementsByName("businessown_d").length;
            		var vehicle_index = document.getElementsByName("vehicle_d").length;
            		var property_index = document.getElementsByName("property_d").length;
            		var note_index = document.getElementsByName("note").length;
            		
            		$node.find('label[id="txt_note"]').css("display","none");
            		$node.find('i[id="add_note"]').css("display","none");
            		$node.find('i[id="minus_note"]').css("display","block");
            		
            		$node.find('i[id="add_saving"]').css("display","none");
            		$node.find('i[id="minus_saving"]').css("display","block");
            		$node.find('div[id="txt_saving"]').css("display","none");
            		
            		$node.find('i[id="add_investment"]').css("display","none");
            		$node.find('i[id="minus_investment"]').css("display","block");
            		$node.find('div[id="txt_investment"]').css("display","none");
            		
            		
            		$node.find('i[id="add_kiwisaver"]').css("display","none");
            		$node.find('i[id="minus_kiwisaver"]').css("display","block");
            		$node.find('div[id="txt_kiwisaver"]').css("display","none");
            		
            		$node.find('i[id="add_otherasset"]').css("display","none");
            		$node.find('i[id="minus_otherasset"]').css("display","block");
            		$node.find('div[id="txt_otherasset"]').css("display","none");
            		
            		$node.find('i[id="add_vehicle"]').css("display","none");
            		$node.find('i[id="minus_vehicle"]').css("display","block");
            		$node.find('div[id="txt_vehicle"]').css("display","none");
            		
            		$node.find('i[id="add_property"]').css("display","none");
            		$node.find('i[id="minus_property"]').css("display","block");
            		$node.find('div[id="txt_property"]').css("display","none");
            		
            		$node.find('i[id="add_businessown"]').css("display","none");
            		$node.find('i[id="minus_businessown"]').css("display","block");
            		$node.find('div[id="txt_businessown"]').css("display","none");
            		
            		$node.find('i[id="add_revcredit"]').css("display","none");
            		$node.find('i[id="minus_revcredit"]').css("display","block");
            		$node.find('div[id="txt_revcredit"]').css("display","none");
            		
            		$node.find('i[id="add_overlimit"]').css("display","none");
            		$node.find('i[id="minus_overlimit"]').css("display","block");
            		$node.find('div[id="txt_overlimit"]').css("display","none");
            		
            		$node.find('i[id="add_creditcard"]').css("display","none");
            		$node.find('i[id="minus_creditcard"]').css("display","block");
            		$node.find('div[id="txt_creditcard"]').css("display","none");
            		
            		$node.find('i[id="add_storecard"]').css("display","none");
            		$node.find('i[id="minus_storecard"]').css("display","block");
            		$node.find('div[id="txt_storecard"]').css("display","none");
            		
            		$node.find('i[id="add_hirepurchase"]').css("display","none");
            		$node.find('i[id="minus_hirepurchase"]').css("display","block");
            		$node.find('div[id="txt_hirepurchase"]').css("display","none");
            		
            		$node.find('i[id="add_otherliability"]').css("display","none");
            		$node.find('i[id="minus_otherliability"]').css("display","block");
            		$node.find('div[id="txt_otherliability"]').css("display","none");
            		
            		$node.find('i[id="add_loandrop"]').css("display","none");
            		$node.find('i[id="minus_loandrop"]').css("display","block");
            		$node.find('div[id="txt_loandrop"]').css("visibility","hidden");
            		
            		$node.find('i[id="add_monthincome"]').css("display","none");
            		$node.find('i[id="minus_monthincome"]').css("display","block");
            		
            		var html = $node.html().replaceAll('[saving_index]',saving_index);  
            		html = html.replaceAll('[investment_index]',investment_index);  
            		
            		html = html.replaceAll('[kiwisaver_index]',kiwisaver_index);  
            		html = html.replaceAll('[otherasset_index]',otherasset_index);  
            		html = html.replaceAll('[vehicle_index]',vehicle_index);  
            		html = html.replaceAll('[property_index]',property_index);  
            		html = html.replaceAll('[businessown_index]',businessown_index);  
            		
            		html = html.replaceAll('[revcredit_index]',revcredit_index);  
            		html = html.replaceAll('[overlimit_index]',overlimit_index);  
            		html = html.replaceAll('[creditcard_index]',creditcard_index);  
            		html = html.replaceAll('[storecard_index]',storecard_index);  
            		html = html.replaceAll('[hirepurchase_index]',hirepurchase_index); 
            		html = html.replaceAll('[otherliability_index]',otherliability_index);  
            		html = html.replaceAll('[loandrop_index]',loandrop_index);  
            		html = html.replaceAll('[monthincome_index]',monthincome_index);  
            		html = html.replaceAll('[note_index]',note_index);  
            		var newnode = parseDom(html);
            		sourceNode.parentNode.appendChild($(newnode)[0]); // 在父节点插入克隆的节点 
            		$("[name='saving_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='investment_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='kiwisaver_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='vehicle_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='property_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='businessown_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='otherasset_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='loandrop_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='otherliability_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='revcredit_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='revcredit_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='overlimit_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='overlimit_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='creditcard_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='creditcard_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='storecard_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='storecard_l']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='hirepurchase_v']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            		$("[name='hirepurchase_c']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            	}
            	function copyNode(nodeid){
            		var node_index = document.getElementsByName("loan_effective_date").length;
            		var property_index = document.getElementsByName("security_property").length;
            		var mobile_index = document.getElementsByName("mobile").length;
            		var email_index = document.getElementsByName("email").length;
            		var address_index = document.getElementsByName("address").length;
            		var sourceNode = document.getElementById(nodeid); // 获得被克隆的节点对象 
            		var clonedNode = sourceNode.cloneNode(true); // 克隆节点 
            		//console.log(sourceNode.innerHTML)
            		//console.log('--------------------')
            		$node = $(clonedNode);
            		$node.find('button[id="bt_mobile"]').css("display","block");
            		$node.find('div[id="divmobile"]').attr("id","divmobile_"+mobile_index);
            		$node.find('button[id="bt_email"]').css("display","block");
            		$node.find('div[id="divemail"]').attr("id","divemail_"+email_index);
            		$node.find('button[id="bt_address"]').css("display","block");
            		$node.find('div[id="divaddress"]').attr("id","divaddress_"+address_index);
            		$node.find('div[id="removeloan"]').css("display","block");
            		$node.find('div[id="removeProperty"]').css("display","block");
            		$node.find('input[name="loan_effective_date"]').attr("id","loan_effective_date_"+node_index);
            		$node.find('select[name="loan_now_rate_period"]').attr("id","loan_now_rate_period_"+node_index);
            		$node.find('input[name="loan_review_date"]').attr("id","loan_review_date_"+node_index);
            		$node.find('input[name="task_id"]').val(0);
            		var html = $node.html().replaceAll('[node_index]',node_index);  
            		html = html.replaceAll('[property_index]',property_index);  
            		html = html.replaceAll('[mobile_index]',mobile_index);  
            		html = html.replaceAll('[email_index]',email_index); 
            		html = html.replaceAll('[address_index]',address_index); 
            		//console.log(html)
            		var newnode = parseDom(html);
            		sourceNode.parentNode.appendChild($(newnode)[0]); // 在父节点插入克隆的节点 
            		$("[name='security_property_value']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
            	}
            	function b20(str){
            		if(typeof str ==='string'){
            			str = str.replace(/\$|,/g, '')
            		}
/*             		console.log(str) */
            		return (str==='')?0:str*1;
            	}
            	function n2b(str){
            		//alert(str);
            		if(str===null)return '';
            		else return str;
            	}
            	function ShowApp(){
	           		　var dfd = $.Deferred();
	           		　setTimeout(function () {
	            		　ShowApplicant();
	            		　dfd.resolve();
	           		　}, 500);
	           		  return dfd.promise;
           		}
                function ShowApplicant(){
                	var clientids = $("#minus_ids").val();
    				if(clientids.length>0){
    					
    					$.post("/client/get_applicants", {"ids":clientids}, function(data) {
        					if(data.code==0){
        						//console.log(data.data);
        						//alert(data.data);income
        						$('#income').css("display","block");
        						$('#expense').css("display","block");
        						$('#applicantmi_txt').css("display","block");
		    					$('#applicantmifr_txt').css("display","block");
		    					$('#applicantmiex_txt').css("display","block");
		    					$('#mifrdiv').css("display","block");
        						$('#miexdiv').css("display","block");
        						$("[name='monthincomefr_net']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
        						$("[name='monthexpend_expense']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
        						var applicants = data.data;
        						var html = $('#applicant').html();
        						var mihtml = $('#midiv').html();
        						
        						
        						for(var i = 0, len = applicants.length; i < len; i++){
        							var pic = '/t/assets/images/avatar/dfavatar.png';
        						    var name = n2b(applicants[i]['first_name'])+" "+n2b(applicants[i]['last_name']);
        						    if(applicants[i]['avatar']!=null)
        						    	pic = applicants[i]['avatar'];
        						    var newhtml = html.replaceAll('[applicant_id]','applicant_'+applicants[i]['id']).replace('[applicant_avatar]',pic).replace('[applicant_name]',name);
        						    $('#applicants').append(newhtml);
        						    var newmihtml = mihtml.replaceAll('[applicant_id]',applicants[i]['id']).replaceAll('[applicant_name]',name);
        						    $('#midivs').append(newmihtml);
        						    $("[name='monthincome_gross_"+applicants[i]['id']+"']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
        						    $("[name='monthincome_net_"+applicants[i]['id']+"']").maskMoney({prefix:'$', allowNegative: true, thousands:',', decimal:'.', affixesStay: true});
        						   /*  var newmifrhtml = mifrhtml.replaceAll('[applicant_id]',applicants[i]['id']).replaceAll('[applicant_name]',name);
        						    $('#mifrdivs').append(newmifrhtml);
        						    var newmiexhtml = miexhtml.replaceAll('[applicant_id]',applicants[i]['id']).replaceAll('[applicant_name]',name);
        						    $('#miexdivs').append(newmiexhtml); */
        						}
        						
        						///t/assets/images/stories/256_rsz_clem-onojeghuo-193397-unsplash.jpg
        						
        						
        						
        						/* layer.open({
        						    content: 'Success',
        						    btn: 'Got it'
        						  });  */
        					}
        					return false;
        				}, "json");  
    				}
    				else{
    					layer.msg('Added Failed. No new applicant.',{
    	                    icon: 1,
    	                    time: 1000 //2秒关闭（如果不配置，默认是3秒）
    	                },function(){
    	                    //history.go(0);
    	                });
    				}
                }
                
                function EditApplicant(id){
                	var appid = id.split('_')[1];
                	var url = '/client/edit?type=2&l=s&id='+appid;
            		layer.open({
            			type: 2,
            			title: 'Edit Applicant',
            			fixed: false, //不固定
            			maxmin: true,
            		    shadeClose: true, //点击遮罩关闭层
            			area: ['80%', '80%'],
            			content: url ,
            			success:function(layero,index){
            	        },
            	        end:function(){
            	        	//ShowApplicant();
            	        }
            		});

            	}
                function ViewApplicant(id){
                	var appid = id.split('_')[1];
                	var url = '/client/view?type=2&l=s&id='+appid;
            		layer.open({
            			type: 2,
            			title: 'Edit Applicant',
            			fixed: false, //不固定
            			maxmin: true,
            		    shadeClose: true, //点击遮罩关闭层
            			area: ['80%', '80%'],
            			content: url ,
            			success:function(layero,index){
            	        },
            	        end:function(){
            	        	//ShowApplicant();
            	        }
            		});

            	}
                function RemoveDiv(id){
                	var appid = id.split('_')[1];
                	var appids = new Set($('#app_ids').val().split(','));
                	appids.delete(appid);
                	var new_appids = String(Array.from(appids));
                	$('#app_ids').val(new_appids);
            		$('#div_applicant_'+id).remove();
            		$('#applicant_mi_card_'+appid).remove();
            		$('#applicant_mifr_card_'+appid).remove();
            		$('#applicant_miex_card_'+appid).remove();
            		if(appids.size===0){
            			$('#applicantmi_txt').css("display","none");
            			$('#applicantmifr_txt').css("display","none");
            			$('#applicantmiex_txt').css("display","none");
            			$('#income').css("display","none");
            			$('#expense').css("display","none");
            		}
            			
            	}
                function strMapToObj(strMap) {
				    let obj = Object.create(null);
				    for (let [k,v] of strMap) {
				        // We don’t escape the key '__proto__'
				        // which can cause problems on older engines
				        obj[k] = v;
				    }
				    return obj;
				}
				
				function objToStrMap(obj) {
				    let strMap = new Map();
				    for (let k of Object.keys(obj)) {
				        strMap.set(k, obj[k]);
				    }
				    return strMap;
				}
				function strMapToJson(strMap) {
				    return JSON.stringify(strMapToObj(strMap));
				}

				function jsonToStrMap(jsonStr) {
				    return objToStrMap(JSON.parse(jsonStr));
				}
				
				function setMonthincome(monthincome){
                	if(monthincome!=''){
                		//monthincome
	    				var miArray = JSON.parse(monthincome);
	    				for(var j=0;j<miArray.length;j++){
	    					var applicantOb = miArray[j];
	    					var applicatid = applicantOb.applicantid;
	    					var monthincomeArray = applicantOb.monthincome;

	                		for(var i=1;i<monthincomeArray.length;i++){

	                			copyApplicantInfo("monthincome",applicatid);

		                	}
	                		
		                	var monthincome_income = document.getElementsByName("monthincome_income_"+applicatid);
		                	var monthincome_description = document.getElementsByName("monthincome_description_"+applicatid);
		                	var monthincome_gross = document.getElementsByName("monthincome_gross_"+applicatid);
		                	var monthincome_net = document.getElementsByName("monthincome_net_"+applicatid);
		    				for(var i=0;i<monthincomeArray.length;i++){
		    					monthincome_income[i].value=monthincomeArray[i]['monthincome_income'];
		    					monthincome_description[i].value=monthincomeArray[i]['monthincome_description'];
		    					monthincome_gross[i].value=monthincomeArray[i]['monthincome_gross'];
		    					monthincome_net[i].value=monthincomeArray[i]['monthincome_net'];
		    				} 
	                	}
                	}  
				}
				function setMonthincomefr(monthincome){
                	if(monthincome!=''){
                		
    					var monthincomeArray = JSON.parse(monthincome);

                		for(var i=1;i<monthincomeArray.length;i++){
                			copyApplicantInfo2("monthincomefr");
	                	}
                		
	                	var monthincome_income = document.getElementsByName("monthincomefr_income");
	                	var monthincome_description = document.getElementsByName("monthincomefr_description");
	                	var monthincome_net = document.getElementsByName("monthincomefr_net");
	    				for(var i=0;i<monthincomeArray.length;i++){
	    					monthincome_income[i].value=monthincomeArray[i]['monthincomefr_income'];
	    					monthincome_description[i].value=monthincomeArray[i]['monthincomefr_description'];
	    					monthincome_net[i].value=monthincomeArray[i]['monthincomefr_net'];
	    				} 
	                	
                	}  
				}
				function setMonthexpend(monthexpend){
                	if(monthexpend!=''){
                		
	    					var monthexpendArray = JSON.parse(monthexpend);

	                		for(var i=1;i<monthexpendArray.length;i++){

	                			copyApplicantInfo2("monthexpend");
		                	}
	                		
		                	var monthexpend_expend = document.getElementsByName("monthexpend_expend");
		                	var monthexpend_description = document.getElementsByName("monthexpend_description");
		                	var monthexpend_expense = document.getElementsByName("monthexpend_expense");
		    				for(var i=0;i<monthexpendArray.length;i++){
		    					monthexpend_expend[i].value=monthexpendArray[i]['monthexpend_expend'];
		    					monthexpend_description[i].value=monthexpendArray[i]['monthexpend_description'];
		    					monthexpend_expense[i].value=monthexpendArray[i]['monthexpend_expense'];
		    				} 
	                	
                	}  
				}
				if('${method}'=='add'){
                	var adviser_name = '${session.user.first_name} ${session.user.last_name}';
                	var adviser_email = '${session.user.email}';
                	var adviser_mobile = '${session.user.mobile}';
                	var time = new Date().format("dd/MM/yyyy");
                	$('#adviser_name').val(adviser_name);
                	$('#adviser_email').val(adviser_email);
                	$('#adviser_contact_number').val(adviser_mobile);
                	$('#application_date').val(time);
                }
                if('${method}'=='edit'){
                	var lending_purpose = JSON.parse('${(application.lending_purpose)!}');
                	$("#lending_purpose").val(lending_purpose).trigger('change');
                	ShowApplicant();
                	var liability = '${(application.liability)!}';
                	if(liability!=''){
	                	var liabilityObject = JSON.parse(liability);
	                	
	                	var revcreditArray = liabilityObject.revcredit;
	                	for(var i=1;i<revcreditArray.length;i++){
	                		copyTr("revcredit");
	                	}
	                	var revcredit_d = document.getElementsByName("revcredit_d");
	                	var revcredit_l = document.getElementsByName("revcredit_l");
	                	var revcredit_v = document.getElementsByName("revcredit_v");
	    				for(var i=0;i<revcreditArray.length;i++){
	    					revcredit_d[i].value=revcreditArray[i]['provider'];
	    					revcredit_l[i].value=revcreditArray[i]['limit'];
	    					revcredit_v[i].value=revcreditArray[i]['balance'];
	    				} 
	    				//overlimit
	    				var overlimitArray = liabilityObject.overlimit;
	                	for(var i=1;i<overlimitArray.length;i++){
	                		copyTr("overlimit");
	                	}
	                	var overlimit_d = document.getElementsByName("overlimit_d");
	                	var overlimit_l = document.getElementsByName("overlimit_l");
	                	var overlimit_v = document.getElementsByName("overlimit_v");
	    				for(var i=0;i<overlimitArray.length;i++){
	    					overlimit_d[i].value=overlimitArray[i]['provider'];
	    					overlimit_l[i].value=overlimitArray[i]['limit'];
	    					overlimit_v[i].value=overlimitArray[i]['balance'];
	    				} 
	    				//creditcard
	    				var creditcardArray = liabilityObject.creditcard;
	                	for(var i=1;i<creditcardArray.length;i++){
	                		copyTr("creditcard");
	                	}
	                	var creditcard_d = document.getElementsByName("creditcard_d");
	                	var creditcard_l = document.getElementsByName("creditcard_l");
	                	var creditcard_v = document.getElementsByName("creditcard_v");
	    				for(var i=0;i<creditcardArray.length;i++){
	    					creditcard_d[i].value=creditcardArray[i]['provider'];
	    					creditcard_l[i].value=creditcardArray[i]['limit'];
	    					creditcard_v[i].value=creditcardArray[i]['balance'];
	    				} 
	    				
	    				//storecard
	    				var storecardArray = liabilityObject.storecard;
	                	for(var i=1;i<storecardArray.length;i++){
	                		copyTr("storecard");
	                	}
	                	var storecard_d = document.getElementsByName("storecard_d");
	                	var storecard_l = document.getElementsByName("storecard_l");
	                	var storecard_v = document.getElementsByName("storecard_v");
	    				for(var i=0;i<storecardArray.length;i++){
	    					storecard_d[i].value=storecardArray[i]['provider'];
	    					storecard_l[i].value=storecardArray[i]['limit'];
	    					storecard_v[i].value=storecardArray[i]['balance'];
	    				} 
	    				
	    				//hirepurchase
	    				var hirepurchaseArray = liabilityObject.hirepurchase;
	                	for(var i=1;i<hirepurchaseArray.length;i++){
	                		copyTr("hirepurchase");
	                	}
	                	var hirepurchase_d = document.getElementsByName("hirepurchase_d");
	                	var hirepurchase_c = document.getElementsByName("hirepurchase_c");
	                	var hirepurchase_v = document.getElementsByName("hirepurchase_v");
	    				for(var i=0;i<hirepurchaseArray.length;i++){
	    					hirepurchase_d[i].value=hirepurchaseArray[i]['provider'];
	    					hirepurchase_c[i].value=hirepurchaseArray[i]['monthly_cost'];
	    					hirepurchase_v[i].value=hirepurchaseArray[i]['balance'];
	    				} 
	    				
	    				//otherliability
	    				var otherliabilityArray = liabilityObject.otherliability;
	                	for(var i=1;i<otherliabilityArray.length;i++){
	                		copyTr("otherliability");
	                	}
	                	var otherliability_d = document.getElementsByName("otherliability_d");
	                	var otherliability_v = document.getElementsByName("otherliability_v");
	    				for(var i=0;i<otherliabilityArray.length;i++){
	    					otherliability_d[i].value=otherliabilityArray[i]['description'];
	    					otherliability_v[i].value=otherliabilityArray[i]['balance'];
	    				} 
	    				
	    				//loandrop
	    				var loandropArray = liabilityObject.loandrop;
	                	for(var i=1;i<loandropArray.length;i++){
	                		copyTr("loandrop");
	                	}
	                	var loandrop_sel = document.getElementsByName("loandrop_sel");
	                	var loandrop_d = document.getElementsByName("loandrop_d");
	                	var loandrop_v = document.getElementsByName("loandrop_v");
	    				for(var i=0;i<loandropArray.length;i++){
	    					loandrop_sel[i].value=loandropArray[i]['loandrop_sel'];
	    					loandrop_d[i].value=loandropArray[i]['loandrop_d'];
	    					loandrop_v[i].value=loandropArray[i]['loandrop_v'];
	    				} 
	    				
	    				
                	}
                	var notes = '${(application.note)!?replace("\'","\\'")}';
                	if(notes!=''){
                		//notes = notes.replace("[&quot;","[\"").replace("&quot;]","\"]");
                		notes = notes.replace(/\n/g,"\\n").replace(/\"/g, "\\\"") ;
                		notes = notes.replace('[\\"','[\"').replace('\\"]','\"]');
                		notes = notes.replace('\\", \\"','\", \"');
                		//console.log(notes)
                		var noteArray = JSON.parse(notes);
                		for(var i=1;i<noteArray.length;i++){
	                		copyTr("note");
	                	}
                		var note = document.getElementsByName("note");
                		for(var i=0;i<noteArray.length;i++){
                			note[i].value=noteArray[i];
	                	}
                	}
    				
                	var asset = '${(application.asset)!}';
                	if(asset!=''){
	                	var assetObject = JSON.parse(asset);
	                	var cash = assetObject.cash;
	                	$('#cash_d').val(cash.cash_d);
	                	$('#cash_v').val(cash.cash_v);
	                	
	                	var furniture = assetObject.furniture;
	                	$('#furniture_d').val(furniture.furniture_d);
	                	$('#furniture_v').val(furniture.furniture_v);
	                	
	                	var term_deposit = assetObject.term_deposit;
	                	$('#term_deposit_d').val(term_deposit.term_deposit_d);
	                	$('#term_deposit_v').val(term_deposit.term_deposit_v);
	                	
	                	var other_currency_account = assetObject.other_currency_account;
	                	$('#other_currency_account_d').val(other_currency_account.other_currency_account_d);
	                	$('#other_currency_account_v').val(other_currency_account.other_currency_account_v);
	                	
	                	var deposit = assetObject.deposit;
	                	$('#deposit_d').val(deposit.deposit_d);
	                	$('#deposit_v').val(deposit.deposit_v);
	                	
	                	var savingArray = assetObject.saving;
	                	for(var i=1;i<savingArray.length;i++){
	                		copyTr("saving");
	                	}
	                	var saving_d = document.getElementsByName("saving_d");
	                	var saving_v = document.getElementsByName("saving_v");
	    				for(var i=0;i<savingArray.length;i++){
	    					saving_d[i].value=savingArray[i]['saving_d'];
	    					saving_v[i].value=savingArray[i]['saving_v'];
	    				}  
	    				
	    				var investmentArray = assetObject.investment;
	                	for(var i=1;i<investmentArray.length;i++){
	                		copyTr("investment");
	                	}
	                	var investment_d = document.getElementsByName("investment_d");
	                	var investment_v = document.getElementsByName("investment_v");
	    				for(var i=0;i<investmentArray.length;i++){
	    					investment_d[i].value=investmentArray[i]['investment_d'];
	    					investment_v[i].value=investmentArray[i]['investment_v'];
	    				}  
	    				
	    				
	    				
	    				var kiwisaverArray = assetObject.kiwisaver;
	                	for(var i=1;i<kiwisaverArray.length;i++){
	                		copyTr("kiwisaver");
	                	}
	                	var kiwisaver_d = document.getElementsByName("kiwisaver_d");
	                	var kiwisaver_v = document.getElementsByName("kiwisaver_v");
	    				for(var i=0;i<kiwisaverArray.length;i++){
	    					kiwisaver_d[i].value=kiwisaverArray[i]['kiwisaver_d'];
	    					kiwisaver_v[i].value=kiwisaverArray[i]['kiwisaver_v'];
	    				}  
	    				
	    				var otherassetArray = assetObject.otherasset;
	                	for(var i=1;i<otherassetArray.length;i++){
	                		copyTr("otherasset");
	                	}
	                	var otherasset_d = document.getElementsByName("otherasset_d");
	                	var otherasset_v = document.getElementsByName("otherasset_v");
	    				for(var i=0;i<otherassetArray.length;i++){
	    					otherasset_d[i].value=otherassetArray[i]['otherasset_d'];
	    					otherasset_v[i].value=otherassetArray[i]['otherasset_v'];
	    				}  
	    				
	    				var businessownArray = assetObject.businessown;
	                	for(var i=1;i<businessownArray.length;i++){
	                		copyTr("businessown");
	                	}
	                	var businessown_d = document.getElementsByName("businessown_d");
	                	var businessown_v = document.getElementsByName("businessown_v");
	    				for(var i=0;i<businessownArray.length;i++){
	    					businessown_d[i].value=businessownArray[i]['businessown_d'];
	    					businessown_v[i].value=businessownArray[i]['businessown_v'];
	    				}  
	    				
	    				var propertyArray = assetObject.property;
	                	for(var i=1;i<propertyArray.length;i++){
	                		copyTr("property");
	                	}
	                	var property_d = document.getElementsByName("property_d");
	                	var property_v = document.getElementsByName("property_v");
	    				for(var i=0;i<propertyArray.length;i++){
	    					property_d[i].value=propertyArray[i]['property_d'];
	    					property_v[i].value=propertyArray[i]['property_v'];
	    				}  
	    				
	    				var vehicleArray = assetObject.vehicle;
	                	for(var i=1;i<vehicleArray.length;i++){
	                		copyTr("vehicle");
	                	}
	                	var vehicle_d = document.getElementsByName("vehicle_d");
	                	var vehicle_v = document.getElementsByName("vehicle_v");
	    				for(var i=0;i<vehicleArray.length;i++){
	    					vehicle_d[i].value=vehicleArray[i]['vehicle_d'];
	    					vehicle_v[i].value=vehicleArray[i]['vehicle_v'];
	    				}  
                	} 
                	
                	var security = '${(application.security)!}';
                	if(security!=''){
	                	var securityArray = JSON.parse(security);
	                	for(var i=1;i<securityArray.length;i++){
	                		copyNode("security_property");
	                	}
	                	var security_property = document.getElementsByName("security_property");
	                	var security_bank = document.getElementsByName("security_bank");
	                	var security_owner = document.getElementsByName("security_owner");
	    				var security_property_type = document.getElementsByName("security_property_type");
	    				var security_property_use = document.getElementsByName("security_property_use");
	    				var security_property_value = document.getElementsByName("security_property_value");
	    				for(var i=0;i<securityArray.length;i++){
	    					security_property[i].value=securityArray[i]['property'];
	    					security_bank[i].value=securityArray[i]['bank'];
	    					security_owner[i].value=securityArray[i]['owner'];
	    					security_property_type[i].value=securityArray[i]['property_type'];
	    					security_property_use[i].value=securityArray[i]['use'];
	    					security_property_value[i].value=securityArray[i]['value'];
	    				}  
                	} 
                	
                	var doc = '${(application.documents)!}';
                	var documents = jsonToStrMap(doc);
                	
                	for(var i=1;i<=documents.size;i++){
    					var key = $('#doc'+i).attr("name");
    					$('#doc'+i).val(documents.get(key).url);
    					if(documents.get(key).url!='')
    						$('#up'+i).html('<img src="/f/i/check.png">');
    				}
                	
                	//alert(documents);
                }
                $(function () { 
                	$("#add_note").on('click',function(e){
                		copyTr("note");
                	});
                	$("#add_property").on('click',function(e){
                		copyTr("property");
                	});
                	$("#add_saving").on('click',function(e){
                		copyTr("saving");
                	});
                	$("#add_investment").on('click',function(e){
                		copyTr("investment");
                	});
                	$("#add_revcredit").on('click',function(e){
                		copyTr("revcredit");
                	});
                	$("#add_overlimit").on('click',function(e){
                		copyTr("overlimit");
                	});
                	$("#add_creditcard").on('click',function(e){
                		copyTr("creditcard");
                	});
                	$("#add_storecard").on('click',function(e){
                		copyTr("storecard");
                	});
                	$("#add_hirepurchase").on('click',function(e){
                		copyTr("hirepurchase");
                	});
                	$("#add_otherliability").on('click',function(e){
                		copyTr("otherliability");
                	});
                	$("#add_loandrop").on('click',function(e){
                		copyTr("loandrop");
                	});
                	$("#add_kiwisaver").on('click',function(e){
                		copyTr("kiwisaver");
                	});
                	$("#add_otherasset").on('click',function(e){
                		copyTr("otherasset");
                	});
                	$("#add_businessown").on('click',function(e){
                		copyTr("businessown");
                	});
                	$("#add_vehicle").on('click',function(e){
                		copyTr("vehicle");
                	});
                	$("#addproperty").on('click',function(e){
                		copyNode("security_property");
                	});
                	$("#add_new_lead").on('click',function(e){
                		$("#minus_ids").val([]);
                		var url = '/client/add?type=0&l=s';
                		layer.open({
                			type: 2,
                			title: 'Add Applicant to Leads',
                			fixed: false, //不固定
                			maxmin: true,
                		    shadeClose: true, //点击遮罩关闭层
                			area: ['80%', '80%'],
                			content: url ,
                			success:function(layero,index){
                	        },
                	        end:function(){
                	        	ShowApplicant();
                	        }
                		});
                	});
                	$("#add_new_client").on('click',function(e){
                		$("#minus_ids").val([]);
                		var url = '/client/add?type=1&l=s';
                		layer.open({
                			type: 2,
                			title: 'Add Applicant to Clients',
                			fixed: false, //不固定
                			maxmin: true,
                		    shadeClose: true, //点击遮罩关闭层
                			area: ['80%', '80%'],
                			content: url ,
                			success:function(layero,index){
                	        },
                	        end:function(){
                	        	ShowApplicant();
                	        }
                		});
                	});
                	
                	$("#add_new_applicant").on('click',function(e){
                		/* $("#minus_ids").val([]);
                		var url = '/client/add?type=2&l=s';
                		layer.open({
                			type: 2,
                			title: 'Add Applicant',
                			fixed: false, //不固定
                			maxmin: true,
                		    shadeClose: true, //点击遮罩关闭层
                			area: ['80%', '80%'],
                			content: url ,
                			success:function(layero,index){
                	        },
                	        end:function(){
                	        	ShowApplicant();
                	        }
                		}); */
                		AddNewApplicant();
                	});
                	
                	
                	function addapplicant(method){
                		$("#minus_ids").val([]);
                		var url = '/client/'+method;
                		layer.open({
                			type: 2,
                			title: 'Add Applicant',
                			fixed: false, //不固定
                			maxmin: true,
                		    shadeClose: true, //点击遮罩关闭层
                			area: ['60%', '60%'],
                			content: url ,
                			success:function(layero,index){
                	        },
                	        end:function(){
                	        	ShowApplicant();
                	        }
                		});
                	}
                	$("#from_applicant").on('click',function(e){
                		addapplicant('from_applicant');
                	});
                	$("#addapplicantfromleads").on('click',function(e){
                		addapplicant('applicantfromlead');
                	});
                	$("#addapplicantfromclient").on('click',function(e){
                		addapplicant('applicantfromclient');
                	});
                })
                function Liability(){
                	var total_liability=0;
                	var liability = {};
                	//revcredit
    				var revcreditArray = new Array();
    				var revcredit_d = document.getElementsByName("revcredit_d");
    				var revcredit_l = document.getElementsByName("revcredit_l");
    				var revcredit_v = document.getElementsByName("revcredit_v");
    				for(var i=0;i<revcredit_v.length;i++){
    					if(revcredit_v[i].value!=''||i==0){
    						var name = "Revolving Credit";
    						if(i>0)name="";
    						revcreditArray.push({"name":name,"provider":revcredit_d[i].value,"limit":revcredit_l[i].value.replace(/\$|,/g, ''),"balance":revcredit_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(revcredit_v[i].value);
    					}
    				} 
    				liability.revcredit = revcreditArray;
    				
    				//overlimit
    				var overlimitArray = new Array();
    				var overlimit_d = document.getElementsByName("overlimit_d");
    				var overlimit_l = document.getElementsByName("overlimit_l");
    				var overlimit_v = document.getElementsByName("overlimit_v");
    				for(var i=0;i<overlimit_v.length;i++){
    					if(overlimit_v[i].value!=''||i==0){
    						var name = "Overdraft Limit";
    						if(i>0)name="";
    						overlimitArray.push({"name":name,"provider":overlimit_d[i].value,"limit":overlimit_l[i].value.replace(/\$|,/g, ''),"balance":overlimit_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(overlimit_v[i].value);
    					}
    				} 
    				liability.overlimit = overlimitArray;
    				
    				//creditcard
    				var creditcardArray = new Array();
    				var creditcard_d = document.getElementsByName("creditcard_d");
    				var creditcard_l = document.getElementsByName("creditcard_l");
    				var creditcard_v = document.getElementsByName("creditcard_v");
    				for(var i=0;i<creditcard_v.length;i++){
    					if(creditcard_v[i].value!=''||i==0){
    						var name = "Credit Card";
    						if(i>0)name="";
    						creditcardArray.push({"name":name,"provider":creditcard_d[i].value,"limit":creditcard_l[i].value.replace(/\$|,/g, ''),"balance":creditcard_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(creditcard_v[i].value);
    					}
    				} 
    				liability.creditcard = creditcardArray;
    				
    				//storecard
    				var storecardArray = new Array();
    				var storecard_d = document.getElementsByName("storecard_d");
    				var storecard_l = document.getElementsByName("storecard_l");
    				var storecard_v = document.getElementsByName("storecard_v");
    				for(var i=0;i<storecard_v.length;i++){
    					if(storecard_v[i].value!=''||i==0){
    						var name = "Store Card";
    						if(i>0)name="";
    						storecardArray.push({"name":name,"provider":storecard_d[i].value,"limit":storecard_l[i].value.replace(/\$|,/g, ''),"balance":storecard_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(storecard_v[i].value);
    					}
    				} 
    				liability.storecard = storecardArray;
    				
    				//hirepurchase
    				var hirepurchaseArray = new Array();
    				var hirepurchase_d = document.getElementsByName("hirepurchase_d");
    				var hirepurchase_c = document.getElementsByName("hirepurchase_c");
    				var hirepurchase_v = document.getElementsByName("hirepurchase_v");
    				for(var i=0;i<hirepurchase_v.length;i++){
    					if(hirepurchase_v[i].value!=''||i==0){
    						var name = "Hire Purchase";
    						if(i>0)name="";
    						hirepurchaseArray.push({"name":name,"provider":hirepurchase_d[i].value,"monthly_cost":hirepurchase_c[i].value.replace(/\$|,/g, ''),"balance":hirepurchase_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(hirepurchase_v[i].value);
    					}
    				} 
    				liability.hirepurchase = hirepurchaseArray;
    				
    				//otherliability
    				var otherliabilityArray = new Array();
    				var otherliability_d = document.getElementsByName("otherliability_d");
    				var otherliability_v = document.getElementsByName("otherliability_v");
    				for(var i=0;i<otherliability_v.length;i++){
    					if(otherliability_v[i].value!=''||i==0){
    						var name = "Other Liabilities";
    						if(i>0)name="";
    						otherliabilityArray.push({"name":name,"description":otherliability_d[i].value,"balance":otherliability_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(otherliability_v[i].value);
    					}
    				} 
    				liability.otherliability = otherliabilityArray;
    				
    				//loandrop
    				var loandropArray = new Array();
    				var loandrop_sel = document.getElementsByName("loandrop_sel");
    				var loandrop_d = document.getElementsByName("loandrop_d");
    				var loandrop_v = document.getElementsByName("loandrop_v");
    				for(var i=0;i<loandrop_v.length;i++){
    					if(loandrop_v[i].value!=''||i==0){
    						loandropArray.push({"loandrop_sel":loandrop_sel[i].value,"loandrop_d":loandrop_d[i].value,"loandrop_v":loandrop_v[i].value.replace(/\$|,/g, '')});
    						total_liability += b20(loandrop_v[i].value);
    					}
    				} 
    				liability.loandrop = loandropArray;
    				
    				$('#total_lvalue').html(formatter.format(total_liability)); 
    				$('#total_lv').val(total_liability);
    				var total_assets = $('#total_v').val();
    				var equity = total_assets*1-total_liability*1;
    				$('#equity_value').html(formatter.format(equity));
    				$('#equity').val(equity);
    				liability.total_value = total_liability;
    				var jsonLiability = JSON.stringify( liability );
    				return jsonLiability;
                }
                //dannel modify
               const formatter = new Intl.NumberFormat('en-US', {
               	  style: 'currency',
               	  currency: 'USD',
               	  minimumFractionDigits: 2
               	})
        function Income(){
        	MonthIncome();
        	MonthIncomefr();
        	var total_income = $('#total_income').val();
        	var total_expense_value = $('#total_expense_value_h').val();
			var surplus = total_income*1-total_expense_value*1;
       		$('#surplus_value').html(formatter.format(surplus));
	        $('#surplus_value_h').val(surplus);
        	$('#total_income_value').html(formatter.format(total_income));
        	$('#total_income_value_h').val(total_income);
        }
		function Asset(){
                	var asset = {};
    				var total_value = 0;
    				var cash_d = $('#cash_d').val();
    				/* var cash_v = $('#cash_v').val(); */ //dannel modify
    				var cash_v = $('#cash_v').maskMoney('unmasked')[0];
    				var cash = {"text":"Cash","cash_d":cash_d,"cash_v":cash_v};
    				asset.cash = cash;
					/* alert(cash_v) */
    				total_value += b20(cash_v);
    				//furniture
    				var furniture_d = $('#furniture_d').val();
    				/* var furniture_v = $('#furniture_v').val(); */ //dannel modify
    				var furniture_v = $('#furniture_v').maskMoney('unmasked')[0];
    				var furniture = {"text":"Furniture","furniture_d":furniture_d,"furniture_v":furniture_v};
    				asset.furniture = furniture;
    				total_value += b20(furniture_v);
    				
    				//term_deposit
    				var term_deposit_d = $('#term_deposit_d').val();
    				/* var term_deposit_v = $('#term_deposit_v').val(); */ //dannel modify
    				var term_deposit_v = $('#term_deposit_v').maskMoney('unmasked')[0];
    				var term_deposit = {"text":"Term Deposit","term_deposit_d":term_deposit_d,"term_deposit_v":term_deposit_v};
    				asset.term_deposit = term_deposit;
    				total_value += b20(term_deposit_v);
    				
    				//other_currency_account
    				var other_currency_account_d = $('#other_currency_account_d').val();
    				/* var other_currency_account_v = $('#other_currency_account_v').val(); */ //dannel modify
    				var other_currency_account_v = $('#other_currency_account_v').maskMoney('unmasked')[0];
    				var other_currency_account = {"text":"Other Currency Account","other_currency_account_d":other_currency_account_d,"other_currency_account_v":other_currency_account_v};
    				asset.other_currency_account = other_currency_account;
    				total_value += b20(other_currency_account_v);
    				
    				
    				//deposit
    				var deposit_d = $('#deposit_d').val();
    				/* var deposit_v = $('#deposit_v').val(); */ //dannel modify
    				var deposit_v = $('#deposit_v').maskMoney('unmasked')[0];
    				var deposit = {"text":"Deposit on property (If Paid)","deposit_d":deposit_d,"deposit_v":deposit_v};
    				asset.deposit = deposit;
    				total_value += b20(deposit_v);
    				//saving
    				var savingArray = new Array();
    				var saving_d = document.getElementsByName("saving_d");
    				var saving_v = document.getElementsByName("saving_v");
    				var saving_o = "Saving";
    				var saving_text = saving_o;
    				for(var i=0;i<saving_v.length;i++){
    					if(saving_v[i].value!=''||i==0){
    						if(i>0)saving_text =saving_o+ " "+(i*1+1);
    						savingArray.push({"text":saving_text,"saving_d":saving_d[i].value,"saving_v":saving_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(saving_v[i].value);
    					}
    				} 
    				
    				asset.saving = savingArray;
    				//investment
    				var investmentArray = new Array();
    				var investment_d = document.getElementsByName("investment_d");
    				var investment_v = document.getElementsByName("investment_v");
    				var investment_o = "Investment";
    				var investment_text = investment_o;
    				for(var i=0;i<investment_v.length;i++){
    					if(investment_v[i].value!=''||i==0){
    						if(i>0)investment_text =investment_o+ " "+(i*1+1);
    						investmentArray.push({"text":investment_text,"investment_d":investment_d[i].value,"investment_v":investment_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(investment_v[i].value);
    					}
    				} 
    				asset.investment = investmentArray;
    				
    				//kiwisaver
    				var kiwisaverArray = new Array();
    				var kiwisaver_d = document.getElementsByName("kiwisaver_d");
    				var kiwisaver_v = document.getElementsByName("kiwisaver_v");
    				var kiwisaver_o = "KiwiSaver";
    				var kiwisaver_text = kiwisaver_o;
    				for(var i=0;i<kiwisaver_v.length;i++){
    					if(kiwisaver_v[i].value!=''||i==0){
    						if(i>0)kiwisaver_text =kiwisaver_o+ " "+(i*1+1);
    						kiwisaverArray.push({"text":kiwisaver_text,"kiwisaver_d":kiwisaver_d[i].value,"kiwisaver_v":kiwisaver_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(kiwisaver_v[i].value);
    					}
    				} 
    				asset.kiwisaver = kiwisaverArray;
    				
    				//otherasset
    				var otherassetArray = new Array();
    				var otherasset_d = document.getElementsByName("otherasset_d");
    				var otherasset_v = document.getElementsByName("otherasset_v");
    				var otherasset_o = "Other Assets (Specify)";
    				var otherasset_text = otherasset_o;
    				for(var i=0;i<otherasset_v.length;i++){
    					if(otherasset_v[i].value!=''||i==0){
    						if(i>0)otherasset_text = otherasset_o+" "+(i*1+1);
    						otherassetArray.push({"text":otherasset_text,"otherasset_d":otherasset_d[i].value,"otherasset_v":otherasset_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(otherasset_v[i].value);
    					}
    				} 
    				asset.otherasset = otherassetArray;
    				
    				//businessown
    				var businessownArray = new Array();
    				var businessown_d = document.getElementsByName("businessown_d");
    				var businessown_v = document.getElementsByName("businessown_v");
    				var businessown_o = "Business owned";
    				var businessown_text = businessown_o;
    				for(var i=0;i<businessown_v.length;i++){
    					if(businessown_v[i].value!=''||i==0){
    						if(i>0)businessown_text = businessown_o + " "+(i*1+1);
    						businessownArray.push({"text":businessown_text,"businessown_d":businessown_d[i].value,"businessown_v":businessown_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(businessown_v[i].value);
    					}
    				} 
    				asset.businessown = businessownArray;
    				
    				//property
    				var propertyArray = new Array();
    				var property_d = document.getElementsByName("property_d");
    				var property_v = document.getElementsByName("property_v");
    				
    				var property_origin = "Property";
    				var property_text = property_origin;
    				for(var i=0;i<property_v.length;i++){
    					if(property_v[i].value!=''||i==0){
    						if(i>0)property_text = property_origin+" "+(i*1+1);
    						propertyArray.push({"text":property_text,"property_d":property_d[i].value,"property_v":property_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(property_v[i].value);
    					}
    				} 
    				asset.property = propertyArray;
    				
    				//vehicle
    				var vehicleArray = new Array();
    				var vehicle_d = document.getElementsByName("vehicle_d");
    				var vehicle_v = document.getElementsByName("vehicle_v");
    				var vehicle_origin = "Motor Vehicle";
    				var vehicle_text = vehicle_origin;
    				for(var i=0;i<vehicle_v.length;i++){
    					if(vehicle_v[i].value!=''||i==0){
    						if(i>0)vehicle_text = vehicle_origin +" "+(i*1+1);
    						vehicleArray.push({"text":vehicle_text,"vehicle_d":vehicle_d[i].value,"vehicle_v":vehicle_v[i].value.replace(/\$|,/g, '')});
    						total_value += b20(vehicle_v[i].value);
    					}
    				} 
    				asset.vehicle = vehicleArray;
    				$('#total_value').html(formatter.format(total_value)); 
    				asset.total_value = total_value;
    				$('#total_v').val(total_value);
    				var total_assets = $('#total_v').val();
    				var total_lvalue = $('#total_lv').val();
    				var equity = total_assets*1-total_lvalue*1;
    				$('#equity_value').html(formatter.format(equity));
    				$('#equity').val(equity);
    				//alert(total_value)
    				var jsonAsset = JSON.stringify( asset );
    				return jsonAsset;
                }	
		// dannel add format date
		function formatDate(date) {
            var d = new Date(date),
                month = '' + (d.getMonth() + 1),
                day = '' + d.getDate(),
                year = d.getFullYear();

            if (month.length < 2) 
                month = '0' + month;
            if (day.length < 2) 
                day = '0' + day;

            return [day, month, year].join('/');
        }
function SaveApp(method){
				

				var appid=$('#appid').val();
				var applicants_ids = $('#app_ids').val();
				var url = "/application/";
				if(method=='add')url+="save";
				else url+="update";
				
				var checklist = new Map();
				
				for(var i=1;i<21;i++){
					var key = $('#doc'+i).attr("name");
					var check = new Object();
					var value = $('#doc'+i).val();
					var doc_name = $('#doc'+i+'_name').html();
					check.name=doc_name;
					check.url = value;
					checklist.set(key,check);
				}
				var documents = strMapToJson(checklist);
//alert(documents)
				if(applicants_ids==''){
					mlayer.open({
					    content: 'Please add an applicant.',
					    btn: 'Got it'
					  });
				}
				else{
					var noteArray = new Array();
					var notes = document.getElementsByName("note");
					for(var i=0;i<notes.length;i++){
						if(notes[i].value!=''){
							noteArray.push(notes[i].value);
						}
					} 
					var jsonNote = JSON.stringify( noteArray );
					
					var application_no=$('#application_no').val();
					var application_date=$('#application_date').val();
					var adviser_name=$('#adviser_name').val();
					var adviser_email=$('#adviser_email').val();
					var adviser_contact_number=$('#adviser_contact_number').val();
					
					var lender=$('#lender').val();
					/* var lending_amount_required=$('#lending_amount_required').val(); */ // dannel modify
					var lending_amount_required=$('#lending_amount_required').maskMoney('unmasked')[0];
					var purposes=$('#lending_purpose').val();
					/* alert(purposes);
					var purposeArr=[];
					for(key in purposes){
						purposeArr.push(key);
			        } */
			        var lending_purpose = JSON.stringify(purposes);
					var purpose=$('#purpose').val();
					var LVR=$('#LVR').val();
					var finance_date=formatDate($('#finance_date').val());
					var settlement_date=formatDate($('#settlement_date').val());
					/* alert(settlement_date) */
					var borrower=$('#borrower').val();
					var security_holder=$('#security_holder').val();
					/* var UMI=$('#UMI').val(); */ //dannel modify
					/* var existing_loan_amount=$('#existing_loan_amount').val();
					var total_loan_amount=$('#total_loan_amount').val(); */
					var UMI=$('#UMI').maskMoney('unmasked')[0];
					var existing_loan_amount=$('#existing_loan_amount').maskMoney('unmasked')[0];
					var total_loan_amount=$('#total_loan_amount').maskMoney('unmasked')[0];
					
					var propertyArray = new Array();
					var security_property = document.getElementsByName("security_property");
					var security_bank = document.getElementsByName("security_bank");
					var security_owner = document.getElementsByName("security_owner");
					var security_property_type = document.getElementsByName("security_property_type");
					var security_property_use = document.getElementsByName("security_property_use");
					var security_property_value = document.getElementsByName("security_property_value");
					console.log()
					for(var i=0;i<security_property.length;i++){
						if(security_property[i].value!=''){
							propertyArray.push({"property":security_property[i].value,"bank":security_bank[i].value,
								"owner":security_owner[i].value,"property_type":security_property_type[i].value,
								"use":security_property_use[i].value,"value":security_property_value[i].value.replace(/\$|,/g, '')});
						}
					} 
					var jsonProperty = JSON.stringify( propertyArray );
					
					var jsonAsset = Asset();
					var jsonLiability = Liability();
					
					var jsonMonthIncome = MonthIncome();
					var jsonMonthIncomefr = MonthIncomefr();
					Income();
					var total_income = $('#total_income_value_h').val();
					var jsonMonthExpend = MonthExpend();
					var total_expense = $('#total_expense_value_h').val();
					var surplus = $('#surplus_value_h').val();
					var total_assets = $('#total_v').val();
					var total_liability = $('#total_lv').val();
					var equity = $('#equity').val();
					$.post(url, {"applicants_ids":applicants_ids,"application.id":appid,
						"application.application_no":application_no,"application_date":application_date,
						"application.adviser_name":adviser_name,"application.adviser_email":adviser_email,
						"application.adviser_contact_number":adviser_contact_number,
						"application.lender":lender,"application.lending_amount_required":lending_amount_required,
						"application.lending_purpose":lending_purpose,"application.purpose":purpose,
						"application.LVR":LVR,"finance_date":finance_date,
						"settlement_date":settlement_date,"application.borrower":borrower,
						"application.security_holder":security_holder,"application.UMI":UMI,
						"application.existing_loan_amount":existing_loan_amount,"application.total_loan_amount":total_loan_amount,
						"application.security":jsonProperty,
						"application.asset":jsonAsset,
						"application.liability":jsonLiability,
						"application.monthincome":jsonMonthIncome,
						"application.monthincome_from_rent":jsonMonthIncomefr,
						"application.monthexpend":jsonMonthExpend,
						"application.note":jsonNote,
						"application.total_income":total_income,
						"application.total_expense":total_expense,
						"application.surplus":surplus,
						"application.total_assets":total_assets,
						"application.total_liability":total_liability,
						"application.equity":equity,
						"application.documents":documents}, function(data) {
						if(data.code==1){
						 	mlayer.open({
							    content: 'Fail',
							    btn: 'Got it'
							  });
							return false;
						}
						else{ 
							mlayer.open({
							    content: 'Success',
							    btn: 'Got it',
							    yes: function(){
							    	location.href="/application";
							      }
							  });
						}
						return false;
					}, "json"); 
				}
				
				return false;
	

}
</script>

<script>
layui.use('upload', function(){
  var $ = layui.jquery
  ,upload = layui.upload;
  
  //拖拽上传
  upload.render({
    elem: '#up1'
    ,url: '/file/'
    ,accept: 'file'
    ,exts: 'pdf|jpg' 
    ,done: function(res){
    	if(res.code==1){
    		$('#doc1').val(res.url);
    		$('#up1').html('<img src="/f/i/check.png">');
    	      //alert($('#doc1').attr("name"));
    	}
    }
  });
  upload.render({
	    elem: '#up2'
	    ,url: '/file/'
	    ,accept: 'file'
	    ,exts: 'pdf|jpg' 
	    ,done: function(res){
	    	if(res.code==1){
	    		$('#doc2').val(res.url);
	    		$('#up2').html('<img src="/f/i/check.png">');
	    	}
	    }
	  });
  upload.render({
	    elem: '#up3'
	    ,url: '/file/'
	    ,accept: 'file'
	    ,exts: 'pdf|jpg' 
	    ,done: function(res){
	    	if(res.code==1){
	    		$('#doc3').val(res.url);
	    		$('#up3').html('<img src="/f/i/check.png">');
	    	}
	    }
	  });
  upload.render({
	    elem: '#up4'
	    ,url: '/file/'
	    ,accept: 'file'
	    ,exts: 'pdf|jpg' 
	    ,done: function(res){
	    	if(res.code==1){
	    		$('#doc4').val(res.url);
	    		$('#up4').html('<img src="/f/i/check.png">');
	    	}
	    }
	  });
  
  upload.render({
	    elem: '#up5'
	    ,url: '/file/'
	    ,accept: 'file'
	    ,exts: 'pdf|jpg' 
	    ,done: function(res){
	    	if(res.code==1){
	    		$('#doc5').val(res.url);
	    		$('#up5').html('<img src="/f/i/check.png">');
	    	      //alert($('#doc1').attr("name"));
	    	}
	    }
	  });
	  upload.render({
		    elem: '#up6'
		    ,url: '/file/'
		    ,accept: 'file'
		    ,exts: 'pdf|jpg' 
		    ,done: function(res){
		    	if(res.code==1){
		    		$('#doc6').val(res.url);
		    		$('#up6').html('<img src="/f/i/check.png">');
		    	}
		    }
		  });
	  upload.render({
		    elem: '#up7'
		    ,url: '/file/'
		    ,accept: 'file'
		    ,exts: 'pdf|jpg' 
		    ,done: function(res){
		    	if(res.code==1){
		    		$('#doc7').val(res.url);
		    		$('#up7').html('<img src="/f/i/check.png">');
		    	}
		    }
		  });
	  upload.render({
		    elem: '#up8'
		    ,url: '/file/'
		    ,accept: 'file'
		    ,exts: 'pdf|jpg' 
		    ,done: function(res){
		    	if(res.code==1){
		    		$('#doc8').val(res.url);
		    		$('#up8').html('<img src="/f/i/check.png">');
		    	}
		    }
		  });
	  
	  upload.render({
		    elem: '#up9'
		    ,url: '/file/'
		    ,accept: 'file'
		    ,exts: 'pdf|jpg' 
		    ,done: function(res){
		    	if(res.code==1){
		    		$('#doc9').val(res.url);
		    		$('#up9').html('<img src="/f/i/check.png">');
		    	      //alert($('#doc1').attr("name"));
		    	}
		    }
		  });
		  upload.render({
			    elem: '#up10'
			    ,url: '/file/'
			    ,accept: 'file'
			    ,exts: 'pdf|jpg' 
			    ,done: function(res){
			    	if(res.code==1){
			    		$('#doc10').val(res.url);
			    		$('#up10').html('<img src="/f/i/check.png">');
			    	}
			    }
			  });
		  upload.render({
			    elem: '#up11'
			    ,url: '/file/'
			    ,accept: 'file'
			    ,exts: 'pdf|jpg' 
			    ,done: function(res){
			    	if(res.code==1){
			    		$('#doc11').val(res.url);
			    		$('#up11').html('<img src="/f/i/check.png">');
			    	}
			    }
			  });
		  upload.render({
			    elem: '#up12'
			    ,url: '/file/'
			    ,accept: 'file'
			    ,exts: 'pdf|jpg' 
			    ,done: function(res){
			    	if(res.code==1){
			    		$('#doc12').val(res.url);
			    		$('#up12').html('<img src="/f/i/check.png">');
			    	}
			    }
			  });
		  
		  upload.render({
			    elem: '#up13'
			    ,url: '/file/'
			    ,accept: 'file'
			    ,exts: 'pdf|jpg' 
			    ,done: function(res){
			    	if(res.code==1){
			    		$('#doc13').val(res.url);
			    		$('#up13').html('<img src="/f/i/check.png">');
			    	      //alert($('#doc1').attr("name"));
			    	}
			    }
			  });
			  upload.render({
				    elem: '#up14'
				    ,url: '/file/'
				    ,accept: 'file'
				    ,exts: 'pdf|jpg' 
				    ,done: function(res){
				    	if(res.code==1){
				    		$('#doc14').val(res.url);
				    		$('#up14').html('<img src="/f/i/check.png">');
				    	}
				    }
				  });
			  upload.render({
				    elem: '#up15'
				    ,url: '/file/'
				    ,accept: 'file'
				    ,exts: 'pdf|jpg' 
				    ,done: function(res){
				    	if(res.code==1){
				    		$('#doc15').val(res.url);
				    		$('#up15').html('<img src="/f/i/check.png">');
				    	}
				    }
				  });
			  upload.render({
				    elem: '#up16'
				    ,url: '/file/'
				    ,accept: 'file'
				    ,exts: 'pdf|jpg' 
				    ,done: function(res){
				    	if(res.code==1){
				    		$('#doc16').val(res.url);
				    		$('#up16').html('<img src="/f/i/check.png">');
				    	}
				    }
				  });
			  
			  upload.render({
				    elem: '#up17'
				    ,url: '/file/'
				    ,accept: 'file'
				    ,exts: 'pdf|jpg' 
				    ,done: function(res){
				    	if(res.code==1){
				    		$('#doc17').val(res.url);
				    		$('#up17').html('<img src="/f/i/check.png">');
				    	      //alert($('#doc1').attr("name"));
				    	}
				    }
				  });
				  upload.render({
					    elem: '#up18'
					    ,url: '/file/'
					    ,accept: 'file'
					    ,exts: 'pdf|jpg' 
					    ,done: function(res){
					    	if(res.code==1){
					    		$('#doc18').val(res.url);
					    		$('#up18').html('<img src="/f/i/check.png">');
					    	}
					    }
					  });
				  upload.render({
					    elem: '#up19'
					    ,url: '/file/'
					    ,accept: 'file'
					    ,exts: 'pdf|jpg' 
					    ,done: function(res){
					    	if(res.code==1){
					    		$('#doc19').val(res.url);
					    		$('#up19').html('<img src="/f/i/check.png">');
					    	}
					    }
					  });
				  upload.render({
					    elem: '#up20'
					    ,url: '/file/'
					    ,accept: 'file'
					    ,exts: 'pdf|jpg' 
					    ,done: function(res){
					    	if(res.code==1){
					    		$('#doc20').val(res.url);
					    		$('#up20').html('<img src="/f/i/check.png">');
					    	}
					    }
					  });
		 
  
});
window.onload = function() { 
	if('${method}'=='edit'){
		var monthincome = '${(application.monthincome)!}';
		var monthincomefr = '${(application.monthincome_from_rent)!}';
		var monthexpend = '${(application.monthexpend)!}';
		setMonthincome(monthincome); 
		setMonthincomefr(monthincomefr); 
		setMonthexpend(monthexpend); 
		Asset();
		Income();
		MonthExpend();
		Liability();
	}
}; 
</script>

</@layout>